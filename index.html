<!DOCTYPE html>
<html lang="fr" class="h-full">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Tankora DB</title>
  <link rel="icon" type="image/svg+xml"
    href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiMzNGQzOTkiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMiAxMmgyMHY2YTIgMiAwIDAgMS0yIDJINGEyIDIgMCAwIDEtMi0ydi02eiIvPjxwYXRoIGQ9Ik02IDEybDItNmg4bDIgNiIvPjxwYXRoIGQ9Ik0xOCA5aDQhaC00Ii8+PHBhdGggZD0iTTIgMTZoMjBoLTIwIi8+PC9zdmc+">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Rajdhani:wght@400;500;600;700&display=swap"
    rel="stylesheet">

  <script src="https://cdn.tailwindcss.com/3.4.1"></script>
  <script crossorigin src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.23.8/babel.min.js"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Rajdhani', 'sans-serif'],
            military: ['"Black Ops One"', 'cursive'],
          },
          colors: {
            slate: {
              850: '#151f32',
              900: '#0f172a',
              950: '#020617',
            },
            military: {
              dark: '#0a0f14',
              panel: '#111822',
              accent: '#eab308'
            }
          },
          screens: {
            'xs': '480px',
          },
          backgroundImage: {
            'hex-pattern': "url('data:image/svg+xml,%3Csvg width=\"24\" height=\"40\" viewBox=\"0 0 24 40\" xmlns=\"http://www.w3.org/2000/svg\"%3E%3Cpath d=\"M0 40c5.523 0 10-4.477 10-10V10c0-5.523-4.477-10-10-10s-10 4.477-10 10v20c0 5.523 4.477 10 10 10zM24 20c0 5.523-4.477 10-10 10S4 25.523 4 20s4.477-10 10-10 10 4.477 10 10z\" fill=\"%231e293b\" fill-opacity=\"0.05\" fill-rule=\"evenodd\"/%3E%3C/svg%3E')",
          }
        }
      }
    }
  </script>

  <style>
    html, body { height: 100%; margin: 0; padding: 0; overflow: hidden; background-color: #05080a; background-image: radial-gradient(circle at 50% 0%, #1e293b 0%, transparent 70%), linear-gradient(to bottom, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.8) 100%), url('data:image/svg+xml,%3Csvg width=\"60\" height=\"60\" viewBox=\"0 0 60 60\" xmlns=\"http://www.w3.org/2000/svg\"%3E%3Cg fill=\"none\" fill-rule=\"evenodd\"%3E%3Cg fill=\"%23334155\" fill-opacity=\"0.08\"%3E%3Cpath d=\"M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z\"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E'); }
    .clip-corner-tr { clip-path: polygon(0 0, calc(100% - 20px) 0, 100% 20px, 100% 100%, 0 100%); }
    .tech-border { position: relative; }
    .tech-border::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; border: 1px solid rgba(255, 255, 255, 0.05); clip-path: polygon(0 0, calc(100% - 20px) 0, 100% 20px, 100% 100%, 0 100%); pointer-events: none; z-index: 10; }
    .tech-border::after { content: ''; position: absolute; top: 0; right: 0; width: 20px; height: 1px; background: rgba(255, 255, 255, 0.2); transform-origin: right top; transform: rotate(45deg); z-index: 11; }
    .custom-scrollbar::-webkit-scrollbar { width: 8px; height: 8px; }
    .custom-scrollbar::-webkit-scrollbar-track { background: #1e293b; }
    .custom-scrollbar::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
    .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #64748b; }
    select.condition-select { -webkit-appearance: none; -moz-appearance: none; appearance: none; text-align-last: center; }
    .animate-in { animation-duration: 0.4s; animation-fill-mode: both; animation-timing-function: cubic-bezier(0.16, 1, 0.3, 1); }
    .fade-in { animation-name: fadeIn; }
    .zoom-in { animation-name: zoomIn; }
    .slide-in-from-bottom { animation-name: slideUp; }
    .slide-in-from-left-2 { animation-name: slideLeft; }
    .slide-in-from-right-4 { animation-name: slideRight; }
    .scroll-smooth { scroll-behavior: smooth; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes zoomIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
    @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes slideLeft { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }
    @keyframes slideRight { from { opacity: 0; transform: translateX(10px); } to { opacity: 1; transform: translateX(0); } }
    .radar-path { stroke-dasharray: 1000; stroke-dashoffset: 1000; animation: dash 1.5s ease-out forwards; }
    @keyframes dash { to { stroke-dashoffset: 0; } }
    .scanline { position: fixed; left: 0; top: 0; width: 100%; height: 100%; background: linear-gradient(to bottom, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0) 50%, rgba(0, 0, 0, 0.2) 50%, rgba(0, 0, 0, 0.2)); background-size: 100% 4px; pointer-events: none; z-index: 9999; opacity: 0.15; }
    
    /* --- FX VISUALS UPDATED --- */
    /* Tier V Gold Sheen - 4s Duration */
    .fx-holo-gold {
        position: relative;
        overflow: hidden;
    }
    .fx-holo-gold::before {
        content: '';
        position: absolute;
        top: 0; left: -150%; width: 50%; height: 100%;
        background: linear-gradient(to right, transparent, rgba(255, 215, 0, 0.1), rgba(255, 255, 255, 0.4), rgba(255, 215, 0, 0.1), transparent);
        transform: skewX(-25deg);
        animation: sheen 4s infinite ease-in-out;
        pointer-events: none;
        z-index: 25;
    }
    @keyframes sheen {
        0%, 70% { left: -150%; }
        100% { left: 150%; }
    }

    /* Prototype - PLASMA ACTIVE (Haute Visibilité, Mouvement Fluide) */
    .fx-holo-proto {
        position: relative;
        border: 1px solid #ef4444 !important;
        background: linear-gradient(135deg, #1a0505 0%, #450a0a 25%, #000000 50%, #450a0a 75%, #1a0505 100%);
        background-size: 400% 400%;
        box-shadow: 0 0 15px rgba(220, 38, 38, 0.4);
        overflow: hidden;
        animation: plasma-shift 15s ease infinite;
        clip-path: none !important;
        border-radius: 6px;
        z-index: 10;
    }
    .fx-holo-proto.tech-border::before { clip-path: none !important; }
    .fx-holo-proto.tech-border::after { display: none !important; }

    @keyframes plasma-shift {
        0% { background-position: 0% 50%; border-color: #ef4444; }
        50% { background-position: 100% 50%; border-color: #b91c1c; }
        100% { background-position: 0% 50%; border-color: #ef4444; }
    }

    .fx-holo-proto::after {
        content: 'TOP SECRET';
        position: absolute;
        top: 14px;
        right: -30px;
        background-color: #991b1b;
        color: white;
        font-family: "Black Ops One", cursive;
        font-size: 8px;
        letter-spacing: 1px;
        padding: 5px 30px;
        transform: rotate(45deg);
        z-index: 20;
        box-shadow: 0 0 10px rgba(0,0,0,0.9);
        border: 1px solid rgba(255, 255, 255, 0.2);
        text-shadow: 0 1px 2px black;
        white-space: nowrap;
        pointer-events: none;
    }

    /* Event - PRESTIGE COLLECTOR */
    .fx-holo-event {
        position: relative;
        border: 1px solid rgba(217, 119, 6, 0.6) !important;
        background: radial-gradient(circle at 100% 100%, #451a03 0%, #0a0500 60%);
        box-shadow: 0 0 15px rgba(245, 158, 11, 0.1);
        overflow: hidden;
        clip-path: none !important;
        border-radius: 6px;
        z-index: 10;
    }
    .fx-holo-event.tech-border::before { clip-path: none !important; }
    .fx-holo-event.tech-border::after { display: none !important; }

    .fx-holo-event::before {
        content: '';
        position: absolute;
        top: 0;
        left: -150%;
        width: 100%;
        height: 100%;
        background: linear-gradient(110deg, transparent 40%, rgba(251, 191, 36, 0.1) 45%, rgba(255, 255, 255, 0.5) 50%, rgba(251, 191, 36, 0.1) 55%, transparent 60%);
        transform: skewX(-25deg);
        animation: prestige-sheen 6s infinite ease-in-out;
        pointer-events: none;
        z-index: 2;
        mix-blend-mode: overlay;
    }

    @keyframes prestige-sheen {
        0%, 30% { left: -150%; opacity: 0; }
        40% { opacity: 1; }
        60% { left: 150%; opacity: 1; }
        100% { left: 150%; opacity: 0; }
    }

    .fx-holo-event::after {
        content: 'EVENT';
        position: absolute;
        top: 14px;
        right: -30px;
        background: linear-gradient(to bottom, #fcd34d 0%, #d97706 100%);
        color: #451a03;
        font-family: "Black Ops One", cursive;
        font-size: 8px;
        font-weight: 900;
        letter-spacing: 2px;
        padding: 5px 30px;
        transform: rotate(45deg);
        z-index: 20;
        box-shadow: 0 2px 8px rgba(0,0,0,0.5);
        border: 1px solid rgba(255, 255, 255, 0.4);
        text-shadow: none;
        white-space: nowrap;
        pointer-events: none;
    }

    /* Table styles */
    .compare-table { width: 100%; border-collapse: separate; border-spacing: 0; }
    .compare-table th, .compare-table td { padding: 12px; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.05); }
    .compare-table th:first-child, .compare-table td:first-child { text-align: left; padding-left: 16px; border-right: 1px solid rgba(255,255,255,0.05); background: rgba(15, 23, 42, 0.5); position: sticky; left: 0; z-index: 10; }
    .compare-table th { background: rgba(15, 23, 42, 0.9); font-weight: bold; color: #94a3b8; text-transform: uppercase; font-size: 0.7rem; letter-spacing: 0.05em; }
    .compare-table tr:hover td { background: rgba(255,255,255,0.02); }
  </style>
</head>

<body class="bg-transparent text-slate-100 font-sans tracking-wide overflow-hidden">
  <div class="scanline"></div>
  <div id="root" class="h-full w-full flex flex-col"></div>

  <script type="text/babel">
    const { useState, useEffect, useMemo, useRef, useCallback } = React;

    const CONDITIONS = {
      salvage: { id: 'salvage', rank: 0, color: 'bg-[#991b1b] text-white border-[#7f1d1d]' },
      damaged: { id: 'damaged', rank: 1, color: 'bg-[#c2410c] text-white border-[#9a3412]' },
      worn: { id: 'worn', rank: 2, color: 'bg-[#f97316] text-white border-[#ea580c]' },
      field_ready: { id: 'field_ready', rank: 3, color: 'bg-[#facc15] text-slate-900 border-[#eab308]' },
      parade_ready: { id: 'parade_ready', rank: 4, color: 'bg-[#4ade80] text-slate-900 border-[#22c55e]' },
      factory_new: { id: 'factory_new', rank: 5, color: 'bg-[#15803d] text-white border-[#166534]' },
    };

    const THEME_COLORS = {
        emerald: { hex: '#10b981', label: 'themeStandard' },
        red: { hex: '#ef4444', label: 'themeSoviet' },
        blue: { hex: '#3b82f6', label: 'themeNATO' },
        amber: { hex: '#f59e0b', label: 'themeDesert' }
    };

    const TRANSLATIONS = {
      fr: {
        appTitle: "Tankora DB", garage: "Garage", compare: "Comparer", details: "Détails", dropRates: "Taux de drop", dropProbability: "Probabilités d'obtention", searchPlaceholder: "Rechercher...", allNations: "Toutes nations", allAges: "Toutes époques", allTiers: "Tous tiers", collected: "Acquis", myTanks: "Mes chars", noResults: "Aucun char ne correspond à ces critères.", checkSpelling: "Essayez de vérifier l'orthographe.", bestFull: "Meilleur", addToGarage: "Ajouter au garage", removeFromGarage: "Retirer du garage", selected: "Sélectionné", size: "Taille", reset: "Réinitialiser", condition: "État", instances: "ex.", totalVehicles: "Véhicules total", uniqueModels: "Modèles uniques", addAnother: "Ajouter", credits: <React.Fragment>All rights reserved to the creator of the Discord bot <span className={`font-black text-transparent bg-clip-text bg-gradient-to-r from-white to-white uppercase tracking-widest hover:brightness-110 transition-colors`}>Qwirdle</span></React.Fragment>, supplyDrop: "Ravitaillement", openSupply: "Ouvrir caisse", statsReport: "Rapport de Progression", statsWW2Only: "Stats PGM-SGM", timerReady: "J'AI WORK !", timerRunning: "PROCHAIN", timerCancel: "Annuler", filterStatus: "Statut", statusAll: "Tous les chars", statusOwned: "Acquis", statusMissing: "Manquants", statusDuplicates: "Doublons", salvage: "Salvage (Épave)", damaged: "Damaged (Endommagé)", worn: "Worn (Usé)", field_ready: "Field Ready (Opérationnel)", parade_ready: "Parade Ready (Défilé)", factory_new: "Factory New (Neuf)", armor: "Blindage", firepower: "Puissance de feu", mobility: "Mobilité", accuracy: "Précision", visibility: "Visibilité", stabilizer: "Stabilisateur", thermal: "Thermique", nightVision: "Vision nocturne", era: "ERA", aps: "APS", autoloader: "Chargeur auto", autocannon: "Autocannon", protectedAmmo: "Munitions protégées", rangefinder: "Télémètre", atgm_p: "ATGM (P)", atgm_s: "ATGM (S)", characteristic: "Caractéristique", nation: "Nation", age: "Époque", rarity: "Tier/Rareté", remove: "Retirer", yes: "Oui", no: "Non", selectTanks: "Sélectionnez des chars pour commencer la comparaison.", dropNote: "Taux officiels définis pour le jeu.",
        viewMode: "Vue", compactView: "Liste", cardView: "Cartes", exportData: "Sauvegarder", importData: "Charger", fileError: "Fichier invalide", dataManagement: "Gestion des données", sortBy: "Trier par", sortNameAsc: "Nom (A-Z)", sortNameDesc: "Nom (Z-A)", sortTierAsc: "Tier (Croissant)", sortTierDesc: "Tier (Décroissant)", sortNation: "Nation", advancedFilters: "Filtres Avancés", toastSaved: "Sauvegarde effectuée !", toastLoaded: "Sauvegarde chargée !", toastAdded: "ajouté au garage !", toastRemoved: "retiré du garage.", distribution: "Répartition par Nation", cleanDuplicates: "Nettoyer doublons", confirmClean: "Êtes-vous sûr de vouloir supprimer tous les doublons ? Seul le meilleur état de chaque char sera conservé.", cleanSuccess: "Doublons nettoyés avec succès !",
        theme: "Thème", themeStandard: "Standard (Émeraude)", themeSoviet: "Soviétique (Rouge)", themeNATO: "OTAN (Bleu)", themeDesert: "Désert (Ambre)"
      },
      en: {
        appTitle: "Tankora DB", garage: "Garage", compare: "Compare", details: "Details", dropRates: "Drop Rates", dropProbability: "Drop Probability", searchPlaceholder: "Search for a tank...", allNations: "All nations", allAges: "All ages", allTiers: "All tiers", collected: "Collected", myTanks: "My tanks", noResults: "No tanks match these criteria.", checkSpelling: "Try checking your spelling.", addToGarage: "Add to garage", removeFromGarage: "Remove from garage", selected: "Selected", size: "Size", reset: "Reset", condition: "Condition", instances: "ex.", totalVehicles: "Total vehicles", uniqueModels: "Unique models", addAnother: "Add", credits: <React.Fragment>All rights reserved to the creator of the Discord bot <span className={`font-black text-transparent bg-clip-text bg-gradient-to-r from-white to-white uppercase tracking-widest hover:brightness-110 transition-colors`}>Qwirdle</span></React.Fragment>, supplyDrop: "Supply Drop", openSupply: "Open Crate", statsReport: "Progression Report", timerReady: "I WORKED!", timerRunning: "NEXT", timerCancel: "Cancel", filterStatus: "Status", statusAll: "All tanks", statusOwned: "Collected", statusMissing: "Missing", statusDuplicates: "Duplicates", salvage: "Salvage", damaged: "Damaged", worn: "Worn", field_ready: "Field Ready", parade_ready: "Parade Ready", factory_new: "Factory New", armor: "Armor", firepower: "Firepower", mobility: "Mobility", accuracy: "Accuracy", visibility: "Visibility", stabilizer: "Stabilizer", thermal: "Thermal", nightVision: "Night vision", era: "ERA", aps: "APS", autoloader: "Autoloader", autocannon: "Autocannon", protectedAmmo: "Protected ammo", rangefinder: "Rangefinder", atgm_p: "ATGM (P)", atgm_s: "ATGM (S)", characteristic: "Characteristic", nation: "Nation", age: "Age", rarity: "Tier/rarity", remove: "Remove", yes: "Yes", no: "No", selectTanks: "Select tanks to start comparing.", dropNote: "Official drop rates defined for the game.",
        viewMode: "View", compactView: "List", cardView: "Cards", exportData: "Save", importData: "Load", fileError: "Invalid file", dataManagement: "Data Management", sortBy: "Sort by", sortNameAsc: "Name (A-Z)", sortNameDesc: "Name (Z-A)", sortTierAsc: "Tier (Low to High)", sortTierDesc: "Tier (High to Low)", sortNation: "Nation", advancedFilters: "Advanced Filters", toastSaved: "Save successful!", toastLoaded: "Save loaded!", toastAdded: "added to garage!", toastRemoved: "removed from garage.", distribution: "Nation Distribution", cleanDuplicates: "Clean Duplicates", confirmClean: "Are you sure you want to remove all duplicates? Only the best condition of each tank will be kept.", cleanSuccess: "Duplicates cleaned successfully!",
        theme: "Theme", themeStandard: "Standard (Emerald)", themeSoviet: "Soviet (Red)", themeNATO: "NATO (Blue)", themeDesert: "Desert (Amber)"
      }
    };

    const DATA_VALUE_MAP_FR = {
      "Soviet Union": "Union soviétique", "German Reich": "Reich allemand", "United States of America": "États-Unis", "United Kingdom": "Royaume-Uni", "France": "France", "Germany": "Allemagne", "Austria": "Autriche", "Russia": "Russie", "Modern": "Moderne", "Cold War": "Guerre froide", "WW1-WW2": "PGM-SGM", "Very High": "Très élevé", "High": "Élevé", "Medium": "Moyen", "Low": "Faible", "Very Low": "Très faible", "Small Arms": "Armes légères", "Very Light": "Très léger", "Light": "Léger", "Heavy": "Lourd", "Very Heavy": "Très lourde", "Fast": "Rapide", "Very Fast": "Très rapide", "Slow": "Lent", "Very Slow": "Très lent", "Small": "Petit", "Large": "Grand", "Very Large": "Très grand", "Tiny": "Minuscule", "Normal": "Normal", "None": "Aucun", "Yes": "Oui", "No": "Non"
    };

    const FIXED_DROP_RATES = [
      { tier: 'Tier I', rate: '51,97%', color: 'text-slate-300' },
      { tier: 'Tier II', rate: '41,06%', color: 'text-green-400' },
      { tier: 'Tier III', rate: '4,798%', color: 'text-blue-400' },
      { tier: 'Tier IV', rate: '1,669%', color: 'text-purple-400' },
      { tier: 'Tier V', rate: '0,4165%', color: 'text-orange-400' },
      { tier: 'Prototype', rate: '0,0999%', color: 'text-red-500' },
      { tier: 'Event', rate: 'Spécial', color: 'text-yellow-400' },
    ];

    const rawCSV = `Name,Nation,Age,Rarity,Armor,Firepower,Accuracy,Size,Mobility,Angled,Visibility,Autocannon,Stabilizer,Protected Ammo,Rangefinder,Autoloader,Night Vision,Thermal Vision,ERA,ATGM (P),ATGM (S),APS
T-26 (twin-turreted),Soviet Union,WW1-WW2,Tier I,Very Light,Small Arms,Low,Small,Slow,Low,Low,No,No,No,No,No,No,No,No,No,No,No
T-26,Soviet Union,WW1-WW2,Tier I,Very Light,Light,Medium,Small,Slow,Low,Low,No,No,No,No,No,No,No,No,No,No,No
BT-2,Soviet Union,WW1-WW2,Tier I,Very Light,Very Light,Medium,Small,Very Fast,Low,Low,No,No,No,No,No,No,No,No,No,No,No
BT-5,Soviet Union,WW1-WW2,Tier II,Very Light,Light,Medium,Small,Very Fast,Low,Low,No,No,No,No,No,No,No,No,No,No,No
BT-7,Soviet Union,WW1-WW2,Tier II,Very Light,Light,Medium,Small,Very Fast,Low,Low,No,No,No,No,No,No,No,No,No,No,No
T-28,Soviet Union,WW1-WW2,Tier II,Light,Light,Medium,Large,Slow,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
T-35A,Soviet Union,WW1-WW2,Tier II,Medium,Heavy,Medium,Very Large,Slow,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
T-50,Soviet Union,WW1-WW2,Tier III,Light,Light,Medium,Small,Fast,High,Medium,No,No,No,No,No,No,No,No,No,No,No
T-40,Soviet Union,WW1-WW2,Tier I,Very Light,Very Light,Low,Small,Normal,None,Low,No,No,No,No,No,No,No,No,No,No,No
T-60,Soviet Union,WW1-WW2,Tier II,Light,Very Light,Low,Small,Normal,Medium,Low,Yes,No,No,No,No,No,No,No,No,No,No
T-70,Soviet Union,WW1-WW2,Tier III,Light,Light,Low,Small,Normal,High,Low,No,No,No,No,No,No,No,No,No,No,No
T-80,Soviet Union,WW1-WW2,Tier II,Light,Light,Medium,Small,Normal,High,Medium,No,No,No,No,No,No,No,No,No,No,No
T-34 Model 1940,Soviet Union,WW1-WW2,Tier II,Medium,Medium,Medium,Medium,Fast,High,Low,No,No,No,No,No,No,No,No,No,No,No
T-34 Model 1941,Soviet Union,WW1-WW2,Tier III,Medium,Medium,High,Medium,Fast,High,Medium,No,No,No,No,No,No,No,No,No,No,No
T-34 Model 1942,Soviet Union,WW1-WW2,Tier III,Medium,Medium,High,Medium,Fast,High,Medium,No,No,No,No,No,No,No,No,No,No,No
T-34 Model 1943,Soviet Union,WW1-WW2,Tier III,Medium,Medium,High,Medium,Fast,High,Medium,No,No,No,No,No,No,No,No,No,No,No
T-34-85,Soviet Union,WW1-WW2,Tier IV,Medium,Heavy,High,Medium,Normal,High,High,No,No,No,No,No,No,No,No,No,No,No
KV-1 Model 1939,Soviet Union,WW1-WW2,Tier II,Heavy,Medium,Medium,Medium,Slow,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
KV-1 Model 1940,Soviet Union,WW1-WW2,Tier II,Heavy,Medium,Medium,Medium,Slow,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
KV-1 Model 1941,Soviet Union,WW1-WW2,Tier III,Heavy,Medium,High,Medium,Slow,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
KV-1 Model 1942,Soviet Union,WW1-WW2,Tier III,Heavy,Medium,High,Medium,Slow,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
KV-1S,Soviet Union,WW1-WW2,Tier IV,Heavy,Medium,High,Medium,Normal,High,Medium,No,No,No,No,No,No,No,No,No,No,No
KV-2,Soviet Union,WW1-WW2,Tier IV,Heavy,Very Heavy,Low,Large,Slow,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
KV-85,Soviet Union,WW1-WW2,Tier IV,Heavy,Heavy,High,Medium,Slow,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
IS-2,Soviet Union,WW1-WW2,Tier V,Very Heavy,Very Heavy,Very High,Very Large,Slow,Medium,High,No,No,No,No,No,No,No,No,No,No,No
SU-76M,Soviet Union,WW1-WW2,Tier II,Very Light,Medium,High,Medium,Normal,High,Medium,No,No,No,No,No,No,No,No,No,No,No
SU-85,Soviet Union,WW1-WW2,Tier IV,Medium,Heavy,High,Medium,Normal,High,Medium,No,No,No,No,No,No,No,No,No,No,No
SU-100,Soviet Union,WW1-WW2,Tier V,Heavy,Very Heavy,High,Medium,Normal,High,Medium,No,No,No,No,No,No,No,No,No,No,No
SU-122,Soviet Union,WW1-WW2,Tier III,Medium,Very Heavy,Medium,Medium,Normal,High,Low,No,No,No,No,No,No,No,No,No,No,No
SU-152,Soviet Union,WW1-WW2,Tier IV,Heavy,Very Heavy,Medium,Medium,Normal,Medium,Low,No,No,No,No,No,No,No,No,No,No,No
ISU-122,Soviet Union,WW1-WW2,Tier V,Very Heavy,Very Heavy,Very High,Large,Slow,Medium,High,No,No,No,No,No,No,No,No,No,No,No
ISU-152,Soviet Union,WW1-WW2,Tier V,Very Heavy,Very Heavy,Very High,Large,Slow,Medium,High,No,No,No,No,No,No,No,No,No,No,No
M3 Stuart,United States of America,WW1-WW2,Tier I,Very Light,Very Light,Medium,Small,Fast,Low,Medium,No,Yes,No,No,No,No,No,No,No,No,No
M5 Stuart,United States of America,WW1-WW2,Tier I,Very Light,Light,Medium,Small,Fast,Medium,Medium,No,Yes,No,No,No,No,No,No,No,No,No
M2 light tank,United States of America,WW1-WW2,Tier I,Very Light,Very Light,Medium,Small,Fast,Low,Medium,No,Yes,No,No,No,No,No,No,No,No,No
M2A2 light tank,United States of America,WW1-WW2,Tier I,Very Light,Small Arms,Low,Small,Fast,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
M22 Locust,United States of America,WW1-WW2,Tier II,Light,Light,Medium,Tiny,Fast,High,Low,No,No,No,No,No,No,No,No,No,No,No
M2A4 light tank,United States of America,WW1-WW2,Tier I,Very Light,Light,Medium,Small,Fast,Low,Medium,No,Yes,No,No,No,No,No,No,No,No,No
M3 Lee,United States of America,WW1-WW2,Tier II,Light,Medium,Medium,Medium,Normal,Medium,Medium,No,Yes,No,No,No,No,No,No,No,No,No
M4 Sherman,United States of America,WW1-WW2,Tier II,Medium,Medium,Medium,Medium,Normal,Medium,High,No,Yes,No,No,No,No,No,No,No,No,No
M4(105) Sherman,United States of America,WW1-WW2,Tier II,Medium,Heavy,Low,Medium,Normal,Medium,High,No,No,No,No,No,No,No,No,No,No,No
M4A1 Sherman,United States of America,WW1-WW2,Tier II,Medium,Medium,Medium,Medium,Normal,Low,High,No,Yes,No,No,No,No,No,No,No,No,No
M4A1(76)W Sherman,United States of America,WW1-WW2,Tier III,Medium,Heavy,High,Medium,Normal,Low,High,No,Yes,Yes,No,No,No,No,No,No,No,No
M4A2 Sherman,United States of America,WW1-WW2,Tier II,Medium,Medium,Medium,Medium,Normal,Medium,High,No,Yes,No,No,No,No,No,No,No,No,No
M4A2(76)W Sherman,United States of America,WW1-WW2,Tier III,Medium,Heavy,High,Medium,Normal,Medium,High,No,Yes,Yes,No,No,No,No,No,No,No,No
M4A3(75)W Sherman,United States of America,WW1-WW2,Tier III,Medium,Heavy,High,Medium,Normal,Medium,High,No,Yes,Yes,No,No,No,No,No,No,No,No
M4A3E2 "Jumbo" (75),United States of America,WW1-WW2,Tier IV,Heavy,Medium,Medium,Medium,Slow,Medium,Medium,No,Yes,No,No,No,No,No,No,No,No,No
M4A3E2 "Jumbo" (76),United States of America,WW1-WW2,Tier IV,Heavy,Heavy,High,Medium,Slow,Medium,Medium,No,Yes,No,No,No,No,No,No,No,No,No
M4A3(76)W Sherman,United States of America,WW1-WW2,Tier IV,Medium,Heavy,High,Medium,Normal,Medium,High,No,Yes,Yes,No,No,No,No,No,No,No,No
M4A4 Sherman,United States of America,WW1-WW2,Tier II,Medium,Medium,Medium,Medium,Normal,Medium,High,No,Yes,No,No,No,No,No,No,No,No,No
M4A1(76)W HVSS Sherman,United States of America,WW1-WW2,Tier III,Medium,Heavy,High,Medium,Fast,Medium,High,No,Yes,Yes,No,No,No,No,No,No,No,No
M4A3(76)W HVSS (Easy Eight) Sherman,United States of America,WW1-WW2,Tier IV,Medium,Heavy,High,Medium,Fast,Medium,High,No,Yes,Yes,No,No,No,No,No,No,No,No
M4A3(75)W HVSS Sherman,United States of America,WW1-WW2,Tier III,Medium,Medium,Medium,Medium,Fast,Medium,High,No,Yes,Yes,No,No,No,No,No,No,No,No
M24 Chaffee,United States of America,WW1-WW2,Tier III,Light,Medium,Medium,Medium,Fast,Medium,High,No,Yes,No,No,No,No,No,No,No,No,No
M3 GMC,United States of America,WW1-WW2,Tier II,Very Light,Medium,High,Medium,Very Fast,None,High,No,No,No,No,No,No,No,No,No,No,No
3-inch GMC M10,United States of America,WW1-WW2,Tier III,Medium,Heavy,High,Medium,Normal,Medium,High,No,No,No,No,No,No,No,No,No,No,No
90 mm GMC M36,United States of America,WW1-WW2,Tier IV,Medium,Heavy,Very High,Medium,Normal,Medium,High,No,No,No,No,No,No,No,No,No,No,No
M18 GMC,United States of America,WW1-WW2,Tier IV,Very Light,Heavy,High,Small,Very Fast,Low,High,No,No,No,No,No,No,No,No,No,No,No
M26 Pershing,United States of America,WW1-WW2,Tier V,Heavy,Heavy,High,Large,Normal,Medium,High,No,No,No,No,No,No,No,No,No,No,No
M26 "Super Pershing",United States of America,WW1-WW2,Tier V,Very Heavy,Heavy,High,Large,Normal,Medium,High,No,No,No,No,No,No,No,No,No,No,No
Carden Loyd Tankette,United Kingdom,WW1-WW2,Tier I,Unarmored,Small Arms,Low,Tiny,Normal,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
Light Tank Mk IV,United Kingdom,WW1-WW2,Tier I,Very Light,Small Arms,Low,Small,Normal,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
Light Tank Mk V,United Kingdom,WW1-WW2,Tier I,Very Light,Small Arms,Low,Small,Normal,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
Light Tank Mk VI,United Kingdom,WW1-WW2,Tier I,Very Light,Small Arms,Low,Small,Normal,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
Light Tank Mk VII Tetrarch,United Kingdom,WW1-WW2,Tier I,Very Light,Light,Medium,Small,Fast,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
Light Tank Mk VIII Harry Hopkins,United Kingdom,WW1-WW2,Tier I,Very Light,Light,Medium,Small,Normal,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
Cruiser Tank Mk V,United Kingdom,WW1-WW2,Tier I,Very Light,Light,Medium,Medium,Normal,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
Crusader I,United Kingdom,WW1-WW2,Tier II,Light,Light,Medium,Medium,Normal,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
Crusader II,United Kingdom,WW1-WW2,Tier II,Light,Light,Medium,Medium,Normal,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
Crusader III,United Kingdom,WW1-WW2,Tier II,Light,Medium,High,Medium,Normal,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
Cavalier,United Kingdom,WW1-WW2,Tier III,Medium,Medium,High,Medium,Normal,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
Cromwell I,United Kingdom,WW1-WW2,Tier III,Medium,Medium,High,Medium,Normal,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
Cromwell III,United Kingdom,WW1-WW2,Tier III,Medium,Medium,High,Medium,Normal,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
Cromwell IV,United Kingdom,WW1-WW2,Tier III,Medium,Medium,Medium,Medium,Normal,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
Cromwell VII,United Kingdom,WW1-WW2,Tier III,Medium,Medium,Medium,Medium,Normal,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
Centaur I,United Kingdom,WW1-WW2,Tier III,Medium,Medium,High,Medium,Normal,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
Centaur III,United Kingdom,WW1-WW2,Tier III,Medium,Medium,Medium,Medium,Normal,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
Challenger,United Kingdom,WW1-WW2,Tier IV,Medium,Heavy,Very High,Medium,Normal,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
Comet I,United Kingdom,WW1-WW2,Tier IV,Medium,Heavy,Very High,Medium,Normal,Low,High,No,No,No,No,No,No,No,No,No,No,No
Matilda I,United Kingdom,WW1-WW2,Tier I,Light,Small Arms,Low,Small,Very Slow,Medium,Low,No,No,No,No,No,No,No,No,No,No,No
Matilda II,United Kingdom,WW1-WW2,Tier II,Medium,Light,Medium,Medium,Very Slow,Medium,High,No,No,No,No,No,No,No,No,No,No,No
Valentine I,United Kingdom,WW1-WW2,Tier II,Light,Light,Medium,Medium,Slow,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
Valentine II,United Kingdom,WW1-WW2,Tier II,Light,Light,Medium,Medium,Slow,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
Valentine III,United Kingdom,WW1-WW2,Tier II,Light,Light,Medium,Medium,Slow,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
Valentine IX,United Kingdom,WW1-WW2,Tier III,Light,Medium,High,Medium,Slow,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
Valentine X,United Kingdom,WW1-WW2,Tier III,Light,Medium,High,Medium,Slow,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
Valentine XI,United Kingdom,WW1-WW2,Tier III,Light,Medium,Medium,Medium,Slow,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
Churchill Mk I,United Kingdom,WW1-WW2,Tier II,Heavy,Light,Medium,Large,Very Slow,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
Churchill Mk II,United Kingdom,WW1-WW2,Tier II,Heavy,Light,Medium,Large,Very Slow,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
Churchill Mk III,United Kingdom,WW1-WW2,Tier III,Heavy,Medium,High,Large,Very Slow,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
Churchill Mk IV,United Kingdom,WW1-WW2,Tier III,Heavy,Medium,High,Large,Very Slow,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
Churchill Mk VII,United Kingdom,WW1-WW2,Tier IV,Very Heavy,Medium,Medium,Large,Very Slow,Low,High,No,No,No,No,No,No,No,No,No,No,No
Churchill Mk IX,United Kingdom,WW1-WW2,Tier IV,Very Heavy,Medium,Medium,Large,Very Slow,Low,High,No,No,No,No,No,No,No,No,No,No,No
Churchill NA75,United Kingdom,WW1-WW2,Tier III,Medium,Medium,High,Large,Very Slow,Low,High,No,No,No,No,No,No,No,No,No,No,No
Churchill Crocodile,United Kingdom,WW1-WW2,Tier V,Very Heavy,Heavy,High,Large,Very Slow,Low,High,No,No,No,No,No,No,No,No,No,No,No
Archer,United Kingdom,WW1-WW2,Tier III,Light,Heavy,Very High,Medium,Slow,Low,High,No,No,No,No,No,No,No,No,No,No,No
17pdr SP Achilles,United Kingdom,WW1-WW2,Tier IV,Very Light,Heavy,Very High,Medium,Normal,Medium,High,No,No,No,No,No,No,No,No,No,No,No
Sherman Firefly VC,United Kingdom,WW1-WW2,Tier IV,Medium,Heavy,Very High,Medium,Normal,Medium,High,No,No,No,No,No,No,No,No,No,No,No
Sherman Firefly IC,United Kingdom,WW1-WW2,Tier IV,Medium,Heavy,Very High,Medium,Normal,Medium,High,No,No,No,No,No,No,No,No,No,No,No
M3 Grant,United Kingdom,WW1-WW2,Tier II,Light,Medium,Medium,Medium,Normal,Medium,High,No,No,No,No,No,No,No,No,No,No,No
Panzer I Ausf. A,German Reich,WW1-WW2,Tier I,Very Light,Small Arms,Low,Small,Slow,Low,Low,No,No,No,No,No,No,No,No,No,No,No
Panzer I Ausf. C,German Reich,WW1-WW2,Tier I,Very Light,Small Arms,Low,Tiny,Slow,Low,Low,No,No,No,No,No,No,No,No,No,No,No
Panzer I Ausf. F,German Reich,WW1-WW2,Tier II,Light,Small Arms,Low,Small,Slow,Low,Low,No,No,No,No,No,No,No,No,No,No,No
Panzer 35 (t),German Reich,WW1-WW2,Tier I,Very Light,Very Light,Medium,Small,Slow,None,Medium,No,Yes,No,No,No,No,No,No,No,No,No
Panzer 38 (t) Ausf. A-D,German Reich,WW1-WW2,Tier I,Very Light,Very Light,Medium,Small,Normal,None,Medium,No,Yes,No,No,No,No,No,No,No,No,No
Panzer 38 (t) Ausf. E-F,German Reich,WW1-WW2,Tier I,Light,Very Light,Medium,Small,Normal,None,Medium,No,Yes,No,No,No,No,No,No,No,No,No
Panzer II Ausf. B,German Reich,WW1-WW2,Tier I,Very Light,Very Light,Low,Small,Normal,Low,Medium,Yes,No,No,No,No,No,No,No,No,No,No,No
Panzer II Ausf. D,German Reich,WW1-WW2,Tier I,Very Light,Very Light,Low,Small,Normal,Low,Medium,Yes,No,No,No,No,No,No,No,No,No,No,No
Panzer II Ausf. L "Luchs",German Reich,WW1-WW2,Tier II,Very Light,Very Light,Low,Small,Normal,Low,Medium,Yes,No,No,No,No,No,No,No,No,No,No,No
Panzer III Ausf. F,German Reich,WW1-WW2,Tier II,Very Light,Light,Medium,Medium,Normal,None,Medium,No,No,No,No,No,No,No,No,No,No,No
Panzer III Ausf. H,German Reich,WW1-WW2,Tier II,Light,Light,Medium,Medium,Normal,None,Medium,No,No,No,No,No,No,No,No,No,No,No
Panzer III Ausf. J,German Reich,WW1-WW2,Tier II,Light,Light,Medium,Medium,Normal,None,Medium,No,No,No,No,No,No,No,No,No,No,No
Panzer III Ausf. L,German Reich,WW1-WW2,Tier III,Light,Medium,Medium,Medium,Normal,None,Medium,No,No,No,No,No,No,No,No,No,No,No
Panzer III Ausf. M,German Reich,WW1-WW2,Tier III,Light,Medium,Medium,Medium,Normal,None,Medium,No,No,No,No,No,No,No,No,No,No,No
Panzer III Ausf. N,German Reich,WW1-WW2,Tier II,Light,Medium,Low,Medium,Normal,None,Medium,No,No,No,No,No,No,No,No,No,No,No
Panzer IV Ausf. D,German Reich,WW1-WW2,Tier II,Light,Medium,Low,Medium,Normal,None,High,No,No,No,No,No,No,No,No,No,No,No
Panzer IV Ausf. E,German Reich,WW1-WW2,Tier II,Light,Medium,Low,Medium,Normal,None,High,No,No,No,No,No,No,No,No,No,No,No
Panzer IV Ausf. F,German Reich,WW1-WW2,Tier II,Light,Medium,Low,Medium,Normal,None,High,No,No,No,No,No,No,No,No,No,No,No
Panzer IV Ausf. G,German Reich,WW1-WW2,Tier III,Medium,Heavy,High,Medium,Normal,None,High,No,No,No,No,No,No,No,No,No,No,No
Panzer IV Ausf. H,German Reich,WW1-WW2,Tier III,Medium,Heavy,High,Medium,Normal,None,High,No,No,No,No,No,No,No,No,No,No,No
Panzer IV Ausf. J,German Reich,WW1-WW2,Tier III,Medium,Heavy,High,Medium,Normal,None,High,No,No,No,No,No,No,No,No,No,No,No
Stug III Ausf. B,German Reich,WW1-WW2,Tier II,Medium,Light,Low,Medium,Normal,None,Medium,No,No,No,No,No,No,No,No,No,No,No
Stug III Ausf. E,German Reich,WW1-WW2,Tier II,Medium,Light,Low,Medium,Normal,None,Medium,No,No,No,No,No,No,No,No,No,No,No
Stug III Ausf. F,German Reich,WW1-WW2,Tier III,Medium,Heavy,High,Medium,Normal,None,Medium,No,No,No,No,No,No,No,No,No,No,No
Stug III Ausf. G,German Reich,WW1-WW2,Tier III,Medium,Heavy,High,Medium,Normal,None,High,No,No,No,No,No,No,No,No,No,No,No
Stug IV,German Reich,WW1-WW2,Tier III,Medium,Heavy,High,Medium,Normal,None,High,No,No,No,No,No,No,No,No,No,No,No
StuH 42,German Reich,WW1-WW2,Tier III,Medium,Medium,Medium,Medium,Normal,None,High,No,No,No,No,No,No,No,No,No,No,No
Sturm-Infanteriegeschütz 33B,German Reich,WW1-WW2,Tier III,Medium,Heavy,Medium,Medium,Very Slow,None,Medium,No,No,No,No,No,No,No,No,No,No,No
Panzerjäger I,German Reich,WW1-WW2,Tier I,Very Light,Light,High,Small,Normal,Low,High,No,No,No,No,No,No,No,No,No,No,No
Marder I,German Reich,WW1-WW2,Tier II,Very Light,Medium,Medium,Small,Normal,None,High,No,No,No,No,No,No,No,No,No,No,No
Marder II,German Reich,WW1-WW2,Tier II,Very Light,Medium,High,Small,Normal,None,High,No,No,No,No,No,No,No,No,No,No,No
Marder III (Sd.Kfz.139),German Reich,WW1-WW2,Tier II,Very Light,Heavy,High,Medium,Normal,Low,High,No,No,No,No,No,No,No,No,No,No,No
Marder III Ausf. H,German Reich,WW1-WW2,Tier III,Very Light,Heavy,High,Medium,Normal,Medium,High,No,No,No,No,No,No,No,No,No,No,No
Marder III Ausf. M,German Reich,WW1-WW2,Tier III,Very Light,Heavy,High,Medium,Normal,Medium,High,No,No,No,No,No,No,No,No,No,No,No
Sturer Emil,German Reich,WW1-WW2,Tier IV,Light,Heavy,High,Large,Slow,Low,High,No,No,No,No,No,No,No,No,No,No,No
Hetzer,German Reich,WW1-WW2,Tier III,Medium,Heavy,High,Small,Normal,High,Low,No,No,No,No,No,No,No,No,No,No,No
Jagdpanzer IV,German Reich,WW1-WW2,Tier IV,Medium,Heavy,High,Medium,Slow,High,Medium,No,No,No,No,No,No,No,No,No,No,No
Jagdpanzer IV/70,German Reich,WW1-WW2,Tier IV,Medium,Heavy,Very High,Medium,Slow,High,Medium,No,No,No,No,No,No,No,No,No,No,No
Nashorn,German Reich,WW1-WW2,Tier IV,Light,Very Heavy,Very High,Medium,Normal,Medium,High,No,No,No,No,No,No,No,No,No,No,No
Jagdpanther,German Reich,WW1-WW2,Tier V,Heavy,Very Heavy,Very High,Large,Normal,High,Medium,No,No,No,No,No,No,No,No,No,No,No
Jagdtiger,German Reich,WW1-WW2,Tier V,Very Heavy,Very Heavy,Very High,Very Large,Slow,High,Medium,No,No,No,No,No,No,No,No,No,No,No
Elefant,German Reich,WW1-WW2,Tier V,Very Heavy,Very Heavy,Very High,Large,Slow,High,High,No,No,No,No,No,No,No,No,No,No,No
Ferdinand,German Reich,WW1-WW2,Tier V,Very Heavy,Very Heavy,Very High,Large,Slow,High,High,No,No,No,No,No,No,No,No,No,No,No
Tiger I Ausf. H1,German Reich,WW1-WW2,Tier IV,Heavy,Heavy,High,Large,Normal,High,High,No,No,No,No,No,No,No,No,No,No,No
Tiger I Ausf. E,German Reich,WW1-WW2,Tier IV,Heavy,Heavy,High,Large,Normal,High,High,No,No,No,No,No,No,No,No,No,No,No
Panther Ausf. D,German Reich,WW1-WW2,Tier IV,Medium,Heavy,Very High,Large,Fast,High,High,No,No,No,No,No,No,No,No,No,No,No
Panther Ausf. A,German Reich,WW1-WW2,Tier IV,Medium,Heavy,Very High,Large,Normal,High,High,No,No,No,No,No,No,No,No,No,No,No
Panther Ausf. G,German Reich,WW1-WW2,Tier IV,Medium,Heavy,Very High,Large,Normal,High,High,No,No,No,No,No,No,No,No,No,No,No
Tiger II (early),German Reich,WW1-WW2,Tier V,Very Heavy,Very Heavy,Very High,Very Large,Normal,High,High,No,No,No,No,No,No,No,No,No,No,No
Tiger II (late),German Reich,WW1-WW2,Tier V,Very Heavy,Very Heavy,Very High,Very Large,Normal,High,High,No,No,No,No,No,No,No,No,No,No,No
Sturmtiger,German Reich,WW1-WW2,Tier V,Very Heavy,Very Heavy,Low,Large,Normal,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
Pz.Kpfw. VIII Maus,German Reich,WW1-WW2,Prototype,Very Heavy,Very Heavy,Very High,Very Large,Very Slow,Medium,High,No,No,No,No,No,No,No,No,No,No,No
SU-100Y Self Propelled Gun,Soviet Union,WW1-WW2,Prototype,Heavy,Very Heavy,High,Very Large,Normal,Low,High,No,No,No,No,No,No,No,No,No,No,No
Super Heavy Tank T28,United States of America,WW1-WW2,Prototype,Very Heavy,Very Heavy,Very High,Very Large,Very Slow,Medium,High,No,No,No,No,No,No,No,No,No,No,No
TOG II,United Kingdom,WW1-WW2,Prototype,Medium,Very Heavy,Very High,Very Large,Very Slow,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
T-44A,Soviet Union,Cold War,Tier I,Medium,Medium,Low,Medium,Fast,High,Low,No,No,No,No,No,No,No,No,No,No,No
IS-3,Soviet Union,Cold War,Tier III,Heavy,Heavy,Low,Medium,Slow,High,Low,No,No,No,No,No,No,No,No,No,No,No
IS-3M,Soviet Union,Cold War,Tier III,Heavy,Heavy,Low,Medium,Slow,High,Low,No,No,No,No,No,No,No,No,No,No,No
IS-4,Soviet Union,Cold War,Tier III,Heavy,Heavy,Low,Medium,Slow,High,Low,No,No,No,No,No,No,No,No,No,No,No
T-10,Soviet Union,Cold War,Tier III,Very Heavy,Heavy,Low,Medium,Slow,High,Low,No,No,No,No,No,No,No,No,No,No,No
T-10A,Soviet Union,Cold War,Tier III,Very Heavy,Heavy,Low,Medium,Normal,High,Medium,No,Yes,No,No,No,No,No,No,No,No,No
T-10M,Soviet Union,Cold War,Tier III,Heavy,Heavy,Very High,Medium,Normal,High,Medium,No,Yes,No,No,No,Yes,No,No,No,No,No
T-54-1,Soviet Union,Cold War,Tier III,Medium,Medium,High,Medium,Normal,High,Medium,No,No,No,No,No,No,No,No,No,No,No
T-54-2,Soviet Union,Cold War,Tier III,Medium,Medium,High,Medium,Normal,High,Medium,No,No,No,No,No,No,No,No,No,No,No
T-54-3,Soviet Union,Cold War,Tier III,Medium,Medium,High,Medium,Normal,High,Medium,No,No,No,No,No,No,No,No,No,No,No
T-54A,Soviet Union,Cold War,Tier III,Medium,Medium,High,Medium,Normal,High,Medium,No,Yes,No,No,No,Yes,No,No,No,No,No
T-54B,Soviet Union,Cold War,Tier III,Medium,Medium,Very High,Medium,Normal,High,Medium,No,Yes,No,No,No,Yes,No,No,No,No,No
T-55,Soviet Union,Cold War,Tier IV,Medium,Heavy,Very High,Medium,Normal,High,Medium,No,Yes,No,No,No,Yes,No,No,No,No,No
T-55A,Soviet Union,Cold War,Tier IV,Medium,Heavy,Very High,Medium,Normal,High,High,No,Yes,No,No,No,Yes,No,No,No,No,No
T-62 Obr. 1960,Soviet Union,Cold War,Tier V,Medium,Very Heavy,Very High,Medium,Normal,High,High,No,Yes,No,No,No,Yes,No,No,No,No,No
T-62 Obr. 1967,Soviet Union,Cold War,Tier V,Medium,Very Heavy,Very High,Medium,Normal,High,High,No,Yes,No,No,No,Yes,No,No,No,No,No
T-64,Soviet Union,Cold War,Tier V,Heavy,Very Heavy,Very High,Medium,Normal,High,High,No,Yes,No,No,Yes,Yes,No,No,No,No,No
ASU-57,Soviet Union,Cold War,Tier I,Unarmored,Light,Medium,Tiny,Fast,None,Very High,No,No,No,No,No,Yes,No,No,No,No,No
ASU-85,Soviet Union,Cold War,Tier II,Light,Medium,High,Small,Normal,Medium,High,No,No,No,No,No,Yes,No,No,No,No,No
BMP-1,Soviet Union,Cold War,Tier III,Very Light,Medium,High,Medium,Fast,Medium,Medium,No,No,No,No,No,Yes,No,No,No,Yes,No
BMD-1,Soviet Union,Cold War,Tier III,Very Light,Medium,High,Medium,Very Fast,Medium,Medium,No,No,No,No,No,Yes,No,No,No,Yes,No
PT-76,Soviet Union,Cold War,Tier II,Very Light,Medium,Medium,Medium,Normal,Medium,Medium,No,No,No,No,No,Yes,No,No,No,No,No
PT-76B,Soviet Union,Cold War,Tier III,Very Light,Heavy,Medium,Medium,Normal,Medium,Medium,No,No,No,No,No,Yes,No,No,No,No,No
IT-1,Soviet Union,Cold War,Tier IV,Medium,N/A,N/A,Medium,Normal,High,High,No,No,No,No,No,Yes,No,No,Yes,No,No
M41 Walker Bulldog,United States of America,Cold War,Tier I,Very Light,Light,Low,Medium,Fast,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
M41A1 Walker Bulldog,United States of America,Cold War,Tier II,Very Light,Medium,Medium,Medium,Fast,Medium,Very High,No,No,No,No,No,No,No,No,No,No,No
M551 Sheridan,United States of America,Cold War,Tier III,Very Light,Heavy,Low,Medium,Fast,Medium,Medium,No,No,No,No,No,Yes,No,No,No,Yes,No
M46 Patton,United States of America,Cold War,Tier II,Medium,Medium,High,Medium,Normal,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
M47 Patton,United States of America,Cold War,Tier II,Medium,Medium,High,Medium,Normal,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
M48 Patton,United States of America,Cold War,Tier III,Medium,Heavy,High,Medium,Normal,Medium,High,No,No,No,No,No,No,No,No,No,No,No
M48A1 Patton,United States of America,Cold War,Tier III,Medium,Heavy,High,Medium,Normal,Medium,High,No,No,No,No,No,No,No,No,No,No,No
M48A2 Patton,United States of America,Cold War,Tier III,Medium,Heavy,High,Medium,Normal,Medium,High,No,No,No,No,No,No,No,No,No,No,No
M48A3 Patton,United States of America,Cold War,Tier III,Medium,Heavy,High,Medium,Normal,Medium,High,No,No,No,No,No,No,No,No,No,No,No
M60,United States of America,Cold War,Tier IV,Medium,Heavy,Very High,Medium,Normal,High,High,No,No,No,No,No,Yes,No,No,No,No,No
M60A1,United States of America,Cold War,Tier IV,Medium,Heavy,Very High,Medium,Normal,High,High,No,Yes,No,No,No,Yes,No,No,No,No,No
M103,United States of America,Cold War,Tier V,Heavy,Very Heavy,Very High,Medium,Slow,High,Medium,No,No,No,No,No,No,No,No,No,No,No
M103A2,United States of America,Cold War,Tier V,Heavy,Very Heavy,Very High,Medium,Slow,High,High,No,No,No,No,No,No,No,No,No,No,No
M50 "Ontos",United States of America,Cold War,Tier III,Unarmored,Very Heavy,Low,Tiny,Normal,High,Medium,No,No,No,No,No,No,No,No,No,No,No
M56 Scorpion,United States of America,Cold War,Tier III,Unarmored,Heavy,High,Tiny,Normal,None,Very High,No,No,No,No,No,No,No,No,No,No,No
Centurion Mk 1,United Kingdom,Cold War,Tier I,Medium,Medium,Medium,Medium,Slow,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
Centurion Mk 2,United Kingdom,Cold War,Tier I,Medium,Medium,Medium,Medium,Slow,Medium,Medium,No,Yes,No,No,No,No,No,No,No,No,No
Centurion Mk 3,United Kingdom,Cold War,Tier II,Medium,Medium,High,Medium,Slow,Medium,Medium,No,Yes,No,No,No,No,No,No,No,No,No
Centurion Mk 5/2,United Kingdom,Cold War,Tier III,Medium,Heavy,Very High,Medium,Slow,Medium,High,No,Yes,No,No,No,No,No,No,No,No,No
Centurion Mk 6/2,United Kingdom,Cold War,Tier III,Medium,Heavy,Very High,Medium,Slow,Medium,High,No,Yes,No,No,No,Yes,No,No,No,No,No
Charioteer,United Kingdom,Cold War,Tier I,Very Light,Medium,High,Medium,Normal,Low,High,No,No,No,No,No,No,No,No,No,No,No
Conqueror Mk I,United Kingdom,Cold War,Tier IV,Heavy,Very Heavy,Very High,Medium,Slow,High,High,No,No,No,No,No,No,No,No,No,No,No
Conqueror Mk II,United Kingdom,Cold War,Tier V,Very Heavy,Very Heavy,Very High,Medium,Slow,High,High,No,No,No,No,No,No,No,No,No,No,No
Chieftain Mk 1,United Kingdom,Cold War,Tier V,Heavy,Very Heavy,Very High,Medium,Normal,High,Very High,No,Yes,No,No,No,No,No,No,No,No,No
Chieftain Mk 2,United Kingdom,Cold War,Tier V,Heavy,Very Heavy,Very High,Medium,Normal,High,Very High,No,Yes,No,No,No,No,No,No,No,No,No
Humber Hornet,United Kingdom,Cold War,Tier II,Very Light,N/A,N/A,Medium,Fast,Low,High,No,No,No,No,No,No,No,No,Yes,No,No
Schützenpanzer SPz 11-2 Kurz,Germany,Cold War,Tier I,Very Light,Very Light,Low,Small,Fast,Medium,Medium,Yes,No,No,No,No,No,No,No,No,No,No
Schützenpanzer Lang HS.30,Germany,Cold War,Tier I,Very Light,Very Light,Low,Small,Fast,Low,Medium,Yes,No,No,No,No,No,No,No,No,No,No,No
Schützenpanzer Lang HS.30 (106mm),Germany,Cold War,Tier II,Very Light,Medium,High,Small,Fast,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
Leopard 1,Germany,Cold War,Tier IV,Light,Heavy,Very High,Medium,Fast,Medium,High,No,No,No,No,No,Yes,No,No,No,No,No
Kanonenjagdpanzer,Germany,Cold War,Tier III,Light,Medium,High,Small,Fast,Low,High,No,No,No,No,No,Yes,No,No,No,No,No
Object 279,Soviet Union,Cold War,Prototype,Very Heavy,Very Heavy,Very High,Very Large,Very Fast,High,Very High,No,No,No,No,No,No,No,No,No,No,No
T114,United States of America,Cold War,Prototype,Very Light,Heavy,Medium,Small,Fast,Medium,High,No,No,No,No,No,No,No,No,No,No,No
KPz 70,Germany,Cold War,Prototype,Medium,Heavy,High,Medium,Fast,Medium,Very High,No,Yes,No,No,Yes,Yes,No,No,No,Yes,No
FV4005,United Kingdom,Cold War,Prototype,Unarmored,Very Heavy,Very High,Large,Slow,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
T-62 Obr. 1972,Soviet Union,Modern,Tier I,Medium,Medium,Medium,Medium,Normal,Medium,Medium,No,Yes,No,No,No,Yes,No,No,No,No,No
T-62 Obr. 1975,Soviet Union,Modern,Tier I,Medium,Medium,Medium,Medium,Normal,Medium,Medium,No,Yes,No,Yes,No,Yes,No,No,No,No,No
T-62D,Soviet Union,Modern,Tier II,Medium,Medium,Medium,Medium,Normal,Medium,Medium,No,Yes,No,Yes,No,Yes,No,No,No,No,Yes
T-62M,Soviet Union,Modern,Tier II,Heavy,Medium,High,Medium,Normal,Medium,High,No,Yes,No,Yes,No,Yes,No,No,No,Yes,No
T-62MD,Soviet Union,Modern,Tier II,Heavy,Medium,High,Medium,Normal,Medium,High,No,Yes,No,Yes,No,Yes,No,No,No,Yes,Yes
T-62MV,Soviet Union,Modern,Tier II,Heavy,Medium,High,Medium,Normal,Medium,High,No,Yes,No,Yes,No,Yes,No,Yes,No,Yes,No
T-64A,Soviet Union,Modern,Tier II,Heavy,Heavy,High,Medium,Normal,High,Medium,No,Yes,No,Yes,Yes,Yes,No,No,No,No,No
T-64B,Soviet Union,Modern,Tier III,Heavy,Heavy,High,Medium,Normal,High,High,No,Yes,No,Yes,Yes,Yes,No,No,No,Yes,No
T-64BV,Soviet Union,Modern,Tier III,Heavy,Heavy,High,Medium,Normal,High,High,No,Yes,No,Yes,Yes,Yes,No,Yes,No,Yes,No
T-72 Ural,Soviet Union,Modern,Tier III,Heavy,Medium,High,Medium,Fast,High,Medium,No,Yes,No,No,Yes,Yes,No,No,No,No,No
T-72A,Soviet Union,Modern,Tier III,Heavy,Heavy,High,Medium,Fast,High,High,No,Yes,No,Yes,Yes,Yes,No,No,No,No,No
T-72B,Soviet Union,Modern,Tier III,Heavy,Heavy,High,Medium,Fast,High,High,No,Yes,No,Yes,Yes,Yes,No,Yes,No,Yes,No
T-72B3,Russia,Modern,Tier IV,Heavy,Heavy,Very High,Medium,Fast,High,High,No,Yes,Yes,Yes,Yes,Yes,Yes,Yes,No,Yes,No
BMPT Terminator,Russia,Modern,Tier III,Heavy,Very Light,Low,Medium,Fast,Medium,High,Yes,Yes,No,Yes,No,Yes,Yes,Yes,No,Yes,No
BMPT-72 Terminator-2,Russia,Modern,Tier III,Heavy,Very Light,Low,Medium,Fast,Medium,High,Yes,Yes,No,Yes,No,Yes,Yes,Yes,No,Yes,No
T-80,Soviet Union,Modern,Tier IV,Heavy,Heavy,Very High,Medium,Very Fast,High,Medium,No,Yes,No,Yes,Yes,Yes,No,No,No,No,No
T-80B,Soviet Union,Modern,Tier IV,Heavy,Heavy,Very High,Medium,Very Fast,High,High,No,Yes,No,Yes,Yes,Yes,Yes,No,No,Yes,No
T-80BV,Soviet Union,Modern,Tier IV,Heavy,Heavy,Very High,Medium,Very Fast,High,High,No,Yes,No,Yes,Yes,Yes,Yes,Yes,No,Yes,No
T-80U,Soviet Union,Modern,Tier IV,Very Heavy,Heavy,Very High,Medium,Very Fast,High,High,No,Yes,No,Yes,Yes,Yes,Yes,Yes,No,Yes,No
T-80UM,Russia,Modern,Tier V,Very Heavy,Heavy,Very High,Medium,Very Fast,High,High,No,Yes,No,Yes,Yes,Yes,Yes,Yes,No,Yes,No
T-80BVM,Russia,Modern,Tier V,Very Heavy,Very Heavy,Very High,Medium,Very Fast,High,Very High,No,Yes,No,Yes,Yes,Yes,Yes,Yes,No,Yes,No
T-90,Russia,Modern,Tier IV,Very Heavy,Heavy,Very High,Medium,Fast,High,High,No,Yes,No,Yes,Yes,Yes,No,Yes,No,Yes,No
T-90A,Russia,Modern,Tier V,Very Heavy,Heavy,Very High,Medium,Fast,High,High,No,Yes,No,Yes,Yes,Yes,Yes,Yes,No,Yes,No
T-90M,Russia,Modern,Tier V,Very Heavy,Very Heavy,Very High,Medium,Fast,High,Very High,No,Yes,Yes,Yes,Yes,Yes,Yes,Yes,No,Yes,Yes
BMP-1P,Soviet Union,Modern,Tier I,Very Light,Medium,Low,Small,Fast,Medium,Medium,No,No,No,No,No,Yes,No,No,No,Yes,No
BMP-1D,Soviet Union,Modern,Tier I,Very Light,Very Light,Low,Small,Fast,Medium,Medium,Yes,No,No,No,No,Yes,No,No,No,Yes,No
BMP-1AM Basurmanin,Russia,Modern,Tier I,Very Light,Very Light,Low,Small,Fast,Medium,Medium,Yes,Yes,No,No,No,Yes,No,No,No,Yes,No
BMP-2,Soviet Union,Modern,Tier I,Very Light,Very Light,Low,Small,Fast,Medium,Medium,Yes,Yes,No,No,No,Yes,No,No,No,Yes,No
BMP-2M,Russia,Modern,Tier I,Very Light,Light,Low,Small,Fast,Medium,High,Yes,Yes,No,Yes,No,Yes,Yes,No,No,Yes,No
BMP-2M "Berezhok",Russia,Modern,Tier I,Very Light,Light,Low,Small,Fast,Medium,High,Yes,Yes,No,Yes,No,Yes,Yes,No,No,Yes,No
BMP-3,Soviet Union,Modern,Tier II,Very Light,Very Light,Low,Small,Very Fast,Low,High,Yes,Yes,No,Yes,Yes,Yes,Yes,No,No,Yes,No
BMP-3M,Russia,Modern,Tier III,Very Light,Very Light,Low,Small,Very Fast,Low,High,Yes,Yes,No,Yes,Yes,Yes,Yes,Yes,No,Yes,No
BRM-3K "Rys",Russia,Modern,Tier II,Very Light,Light,Low,Small,Very Fast,Low,Very High,Yes,Yes,No,Yes,Yes,Yes,Yes,No,No,No,No
BMP-3 "Khrizantema-S",Russia,Modern,Tier II,Very Light,N/A,N/A,Small,Very Fast,High,High,No,No,No,Yes,Yes,Yes,Yes,No,Yes,No,No
BMD-1P,Soviet Union,Modern,Tier I,Very Light,Medium,Low,Small,Very Fast,Low,Medium,No,No,No,No,No,Yes,No,No,No,Yes,No
BMD-2,Soviet Union,Modern,Tier I,Very Light,Very Light,Low,Small,Very Fast,Low,High,Yes,Yes,No,No,No,Yes,No,No,No,Yes,No
BMD-2M,Russia,Modern,Tier II,Very Light,Very Light,Low,Small,Very Fast,Low,High,Yes,Yes,No,Yes,No,Yes,Yes,No,No,Yes,No
BMD-3,Russia,Modern,Tier II,Very Light,Very Light,Low,Small,Very Fast,Low,High,Yes,Yes,No,No,No,Yes,No,No,No,Yes,No
BMD-4,Russia,Modern,Tier II,Very Light,Light,Low,Small,Very Fast,Low,High,Yes,Yes,No,Yes,Yes,Yes,Yes,No,No,Yes,No
2S25 Sprut-SD,Russia,Modern,Tier III,Very Light,Very Heavy,Very High,Medium,Fast,Low,Very High,No,Yes,No,Yes,Yes,Yes,Yes,No,No,No,No
M48A5 Patton,United States of America,Modern,Tier I,Light,Light,High,Medium,Normal,Medium,Medium,No,Yes,No,No,No,No,No,No,No,No,No
M60A1 AOS,United States of America,Modern,Tier I,Medium,Light,High,Medium,Normal,Medium,Medium,No,Yes,No,No,No,Yes,No,No,No,No,No
M60A1 RISE,United States of America,Modern,Tier I,Medium,Medium,High,Medium,Normal,Medium,Medium,No,Yes,No,No,No,Yes,No,No,No,No,No
M60A1 RISE Passive,United States of America,Modern,Tier II,Medium,Medium,High,Medium,Normal,Medium,Medium,No,Yes,No,No,No,Yes,No,Yes,No,No,No
M60A2 "Starship",United States of America,Modern,Tier II,Medium,Medium,Medium,Medium,Normal,Medium,Medium,No,Yes,No,Yes,No,Yes,No,No,No,Yes,No
M60A3,United States of America,Modern,Tier III,Medium,Medium,High,Medium,Normal,Medium,High,No,Yes,No,Yes,No,Yes,No,No,No,No,No
M60A3 TTS,United States of America,Modern,Tier III,Medium,Medium,High,Medium,Normal,Medium,High,No,Yes,No,Yes,No,Yes,Yes,Yes,No,No,No
M1 Abrams,United States of America,Modern,Tier III,Medium,Medium,High,Large,Very Fast,Medium,High,No,Yes,Yes,Yes,No,Yes,Yes,No,No,No,No
M1A1 Abrams,United States of America,Modern,Tier IV,Heavy,Heavy,Very High,Large,Very Fast,Medium,High,No,Yes,Yes,Yes,No,Yes,Yes,No,No,No,No
M1A1HA Abrams,United States of America,Modern,Tier IV,Heavy,Heavy,Very High,Large,Very Fast,Medium,High,No,Yes,Yes,Yes,No,Yes,Yes,No,No,No,No
M1A1HC Abrams,United States of America,Modern,Tier IV,Heavy,Heavy,Very High,Large,Very Fast,Medium,High,No,Yes,Yes,Yes,No,Yes,Yes,No,No,No,No
M1A2 Abrams,United States of America,Modern,Tier V,Heavy,Very Heavy,Very High,Large,Fast,Medium,High,No,Yes,Yes,Yes,No,Yes,Yes,No,No,No,No
M1A2 SEPv3 Abrams,United States of America,Modern,Tier V,Heavy,Very Heavy,Very High,Very Large,Fast,Medium,Very High,No,Yes,Yes,Yes,No,Yes,Yes,Yes,No,No,Yes
M551A1 Sheridan,United States of America,Modern,Tier II,Very Light,Light,Medium,Medium,Fast,Medium,Medium,No,Yes,No,Yes,No,Yes,No,No,No,Yes,No
M551A1 TTS Sheridan,United States of America,Modern,Tier II,Very Light,Light,Medium,Medium,Fast,Medium,High,No,Yes,No,Yes,No,Yes,Yes,No,No,Yes,No
M1128 mobile gun system,United States of America,Modern,Tier III,Very Light,Heavy,High,Medium,Very Fast,Medium,High,No,Yes,No,Yes,Yes,Yes,Yes,No,No,No,No
M1134 ATGM vehicle,United States of America,Modern,Tier I,Very Light,N/A,N/A,Medium,Very Fast,Medium,High,No,No,No,No,No,Yes,No,No,Yes,No,No
M1296 (ICVD),United States of America,Modern,Tier I,Very Light,Very Light,Low,Medium,Very Fast,Medium,Very High,Yes,Yes,No,Yes,No,Yes,No,No,No,No,No
M2 Bradley,United States of America,Modern,Tier II,Very Light,Very Light,Low,Large,Normal,Medium,Medium,Yes,Yes,No,No,No,Yes,Yes,No,No,Yes,No
M2A2 Bradley,United States of America,Modern,Tier II,Very Light,Very Light,Low,Large,Normal,Medium,High,Yes,Yes,No,Yes,No,Yes,Yes,Yes,No,Yes,No
M2A3 Bradley,United States of America,Modern,Tier III,Very Light,Light,Low,Large,Normal,Medium,High,Yes,Yes,No,Yes,No,Yes,Yes,Yes,No,Yes,No
M2A4 Bradley,United States of America,Modern,Tier III,Very Light,Light,Low,Large,Normal,Medium,High,Yes,Yes,No,Yes,No,Yes,Yes,Yes,No,Yes,Yes
M3 Bradley,United States of America,Modern,Tier II,Very Light,Very Light,Low,Large,Normal,Medium,High,Yes,Yes,No,No,No,Yes,Yes,No,No,Yes,No
M3A2 Bradley,United States of America,Modern,Tier III,Very Light,Light,Low,Large,Normal,Medium,High,Yes,Yes,No,Yes,No,Yes,Yes,Yes,No,Yes,No
M3A3 Bradley,United States of America,Modern,Tier III,Very Light,Light,Low,Large,Normal,Medium,High,Yes,Yes,No,Yes,No,Yes,Yes,Yes,No,Yes,No
M901 ITV,United States of America,Modern,Tier II,Very Light,N/A,N/A,Large,Normal,Low,High,No,No,No,No,No,Yes,No,No,Yes,No,No
Chieftain Mk 3,United Kingdom,Modern,Tier II,Medium,Medium,Very High,Medium,Slow,Medium,High,No,Yes,No,No,No,Yes,No,No,No,No,No
Chieftain Mk 3/3,United Kingdom,Modern,Tier II,Medium,Medium,Very High,Medium,Slow,Medium,High,No,Yes,No,Yes,No,Yes,No,No,No,No,No
Chieftain Mk 10,United Kingdom,Modern,Tier III,Heavy,Heavy,Very High,Medium,Slow,Medium,High,No,Yes,No,Yes,No,Yes,No,No,No,No,No
Challenger 1 Mk 1,United Kingdom,Modern,Tier III,Heavy,Heavy,Very High,Medium,Fast,High,High,No,Yes,No,Yes,No,Yes,Yes,No,No,No,No
Challenger 1 Mk 2,United Kingdom,Modern,Tier III,Heavy,Heavy,Very High,Medium,Fast,High,High,No,Yes,No,Yes,No,Yes,Yes,No,No,No,No
Challenger 2,United Kingdom,Modern,Tier V,Heavy,Heavy,Very High,Large,Fast,High,High,No,Yes,No,Yes,No,Yes,Yes,No,No,No,No
FV438 Swingfire,United Kingdom,Modern,Tier II,Very Light,N/A,N/A,Small,Normal,Low,Medium,No,No,No,No,No,No,No,No,Yes,No,No
FV102 Striker,United Kingdom,Modern,Tier II,Very Light,N/A,N/A,Small,Very Fast,Low,Medium,No,No,No,No,No,No,No,No,Yes,No,No
Leopard 1A1A1,Germany,Modern,Tier II,Very Light,Medium,High,Medium,Fast,Medium,Medium,No,Yes,No,No,No,Yes,No,No,No,No,No
Leopard 1A1A2,Germany,Modern,Tier III,Very Light,Medium,High,Medium,Fast,Medium,Medium,No,Yes,No,No,No,Yes,Yes,No,No,No,No
Leopard 1A2,Germany,Modern,Tier II,Very Light,Medium,High,Medium,Fast,Medium,High,No,Yes,No,No,No,Yes,No,No,No,No,No
Leopard 1A2A1,Germany,Modern,Tier III,Very Light,Medium,High,Medium,Fast,Medium,High,No,Yes,No,No,No,Yes,Yes,No,No,No,No
Leopard 1A3,Germany,Modern,Tier II,Very Light,Medium,High,Medium,Fast,Medium,High,No,Yes,No,No,No,Yes,No,No,No,No,No
Leopard 1A5,Germany,Modern,Tier II,Very Light,Heavy,High,Medium,Fast,Medium,High,No,Yes,No,Yes,No,Yes,Yes,No,No,No,No
Leopard 2A0,Germany,Modern,Tier III,Light,Heavy,Very High,Medium,Fast,Medium,High,No,Yes,Yes,Yes,No,Yes,No,No,No,No,No
Leopard 2A1,Germany,Modern,Tier III,Light,Heavy,Very High,Medium,Fast,Medium,High,No,Yes,Yes,Yes,No,Yes,Yes,No,No,No,No
Leopard 2A4,Germany,Modern,Tier III,Medium,Heavy,Very High,Large,Fast,Medium,High,No,Yes,Yes,Yes,No,Yes,Yes,No,No,No,No
Leopard 2A5,Germany,Modern,Tier IV,Heavy,Very Heavy,Very High,Large,Fast,Medium,High,No,Yes,Yes,Yes,No,Yes,Yes,No,No,No,No
Leopard 2A6,Germany,Modern,Tier IV,Heavy,Very Heavy,Very High,Large,Fast,Medium,High,No,Yes,Yes,Yes,No,Yes,Yes,No,No,No,No
Leopard 2A7,Germany,Modern,Tier V,Very Heavy,Very Heavy,Very High,Large,Fast,Medium,Very High,No,Yes,Yes,Yes,No,Yes,Yes,No,No,No,No
Marder 1,Germany,Modern,Tier I,Very Light,Very Light,Low,Medium,Fast,Medium,Medium,Yes,No,No,No,No,No,No,No,No,Yes,No
Marder 1 A1(+),Germany,Modern,Tier II,Very Light,Very Light,Low,Medium,Fast,Medium,Medium,Yes,No,No,No,No,Yes,Yes,No,No,Yes,No
Marder 1 A1(-),Germany,Modern,Tier I,Very Light,Very Light,Low,Medium,Fast,Medium,Medium,Yes,No,No,No,No,Yes,No,No,No,Yes,No
Marder 1 A1A,Germany,Modern,Tier II,Very Light,Very Light,Low,Medium,Fast,Medium,Medium,Yes,No,No,No,No,No,Yes,No,No,Yes,No
Marder 1 A1A2,Germany,Modern,Tier II,Very Light,Very Light,Low,Medium,Fast,Medium,Medium,Yes,No,No,No,No,Yes,Yes,No,No,Yes,No
Marder 1 A2,Germany,Modern,Tier II,Very Light,Very Light,Low,Medium,Fast,Medium,High,Yes,No,No,No,No,Yes,Yes,No,No,Yes,No
Wiesel 1 ATM TOW,Germany,Modern,Tier II,Very Light,N/A,N/A,Tiny,Fast,Medium,Medium,No,No,No,No,No,Yes,No,No,Yes,No,No
Wiesel 1 MK20,Germany,Modern,Tier I,Very Light,Very Light,Low,Tiny,Fast,Medium,Medium,Yes,No,No,No,No,Yes,No,No,No,No,No
Jaguar 1,Germany,Modern,Tier II,Very Light,N/A,N/A,Small,Fast,Low,High,No,No,No,No,No,Yes,No,No,Yes,No,No
Jaguar 1A3,Germany,Modern,Tier II,Very Light,N/A,N/A,Small,Fast,Low,High,No,No,No,No,No,Yes,Yes,No,Yes,No,No
Jaguar 2,Germany,Modern,Tier II,Very Light,N/A,N/A,Small,Fast,Low,High,No,No,No,No,No,Yes,No,No,Yes,No,No
Schützenpanzer Puma,Germany,Modern,Tier III,Medium,Light,Low,Large,Normal,Medium,High,Yes,Yes,No,Yes,No,Yes,Yes,Yes,No,Yes,No
Object 640,Soviet Union,Modern,Prototype,Heavy,Heavy,Very High,Medium,Fast,High,High,No,Yes,No,Yes,Yes,Yes,Yes,Yes,No,Yes,No
HSTVL,United States of America,Modern,Prototype,Very Light,Medium,Very High,Medium,Very Fast,High,High,No,Yes,No,Yes,Yes,Yes,Yes,No,No,No,No
Challenger 3,United Kingdom,Modern,Prototype,Very Heavy,Very Heavy,Very High,Large,Fast,High,Very High,No,Yes,No,Yes,No,Yes,Yes,No,No,No,No
Begleitpanzer 57,Germany,Modern,Prototype,Very Light,Light,High,Small,Very Fast,High,High,Yes,Yes,No,Yes,No,Yes,No,No,No,Yes,No
Renault FT 1917,France,WW1-WW2,Tier I,Very Light,Very Light,Low,Tiny,Very Slow,Medium,Low,No,No,No,No,No,No,No,No,No,No,No
Renault FT 1931,France,WW1-WW2,Tier I,Very Light,Very Light,Low,Tiny,Very Slow,Low,Low,No,No,No,No,No,No,No,No,No,No,No
Hotchkiss H35,France,WW1-WW2,Tier I,Light,Very Light,Low,Small,Slow,Low,Low,No,No,No,No,No,No,No,No,No,No,No
Hotchkiss H38,France,WW1-WW2,Tier I,Light,Very Light,Low,Small,Slow,Low,Low,No,No,No,No,No,No,No,No,No,No,No
Hotchkiss H39,France,WW1-WW2,Tier I,Light,Very Light,Low,Small,Slow,Low,Low,No,No,No,No,No,No,No,No,No,No,No
AMR 35 ZT1,France,WW1-WW2,Tier I,Light,Small Arms,Low,Small,Slow,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
AMR 35 ZT2,France,WW1-WW2,Tier I,Light,Very Light,Low,Small,Slow,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
AMR 35 ZT3,France,WW1-WW2,Tier I,Light,Light,Low,Tiny,Slow,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
AMC 34,France,WW1-WW2,Tier I,Light,Very Light,Low,Tiny,Slow,Low,Low,No,No,No,No,No,No,No,No,No,No,No
Renault D1,France,WW1-WW2,Tier I,Light,Very Light,Low,Small,Slow,Low,Low,No,No,No,No,No,No,No,No,No,No,No
SOMUA S35,France,WW1-WW2,Tier II,Medium,Light,Medium,Medium,Slow,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
Panhard 178 AMD 35,France,WW1-WW2,Tier II,Very Light,Light,Medium,Small,Very Fast,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
Renault D2,France,WW1-WW2,Tier II,Medium,Light,Medium,Medium,Slow,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
Panhard 178 B,France,WW1-WW2,Tier II,Very Light,Medium,Medium,Medium,Fast,Low,High,No,No,No,No,No,No,No,No,No,No,No
Char B1 bis,France,WW1-WW2,Tier III,Heavy,Medium,Medium,Large,Slow,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
Char B1 ter,France,WW1-WW2,Tier III,Heavy,Medium,Medium,Large,Slow,High,Medium,No,No,No,No,No,No,No,No,No,No,No
Char 2C,France,WW1-WW2,Tier III,Heavy,Medium,Medium,Very Large,Very Slow,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
SAu 40,France,WW1-WW2,Tier III,Medium,Medium,Medium,Medium,Normal,High,Medium,No,No,No,No,No,No,No,No,No,No,No
AML-60 12,France,Cold War,Tier I,Very Light,Small Arms,Low,Tiny,Very Fast,Low,High,No,No,No,No,No,No,No,No,No,No,No
AML-60 20 Serval,France,Cold War,Tier I,Very Light,Very Light,Low,Tiny,Very Fast,Low,High,No,No,No,No,No,No,No,No,No,No,No
AMX 13 FL11,France,Cold War,Tier I,Very Light,Light,Low,Small,Fast,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
AMX 13 M24,France,Cold War,Tier I,Light,Light,Medium,Medium,Fast,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
ARL 44,France,Cold War,Tier II,Medium,Medium,Medium,Very Large,Normal,High,Medium,No,No,No,No,No,No,No,No,No,No,No
AMX 13 75,France,Cold War,Tier II,Very Light,Medium,Medium,Medium,Fast,Low,Medium,No,No,No,No,Yes,No,No,No,No,No,No
EBR 1951,France,Cold War,Tier II,Very Light,Light,Low,Small,Very Fast,Low,High,No,No,No,No,No,No,No,No,No,No,No
AMX 13 90,France,Cold War,Tier III,Very Light,Heavy,High,Medium,Fast,Low,Medium,No,No,No,No,Yes,No,No,No,No,No,No
AMX 13 90 LRF,France,Cold War,Tier III,Very Light,Heavy,High,Medium,Fast,Low,Medium,No,No,No,Yes,Yes,No,No,No,No,No,No
AMX 13 SS11,France,Cold War,Tier III,Very Light,Medium,High,Medium,Fast,Medium,High,No,No,No,No,Yes,No,No,No,No,Yes,No
EBR 1954,France,Cold War,Tier III,Very Light,Medium,High,Small,Very Fast,Low,High,No,No,No,No,Yes,No,No,No,No,No,No
EBR 1963,France,Cold War,Tier III,Very Light,Heavy,High,Small,Very Fast,Low,High,No,No,No,No,No,No,No,No,No,No,No
AML 90,France,Cold War,Tier III,Very Light,Heavy,High,Tiny,Very Fast,None,Very High,No,No,No,No,No,No,No,No,No,No,No
AMX 30 1966,France,Cold War,Tier IV,Medium,Heavy,Very High,Medium,Fast,Low,Very High,No,No,No,Yes,No,Yes,No,No,No,No,No
AMX 50 Foch,France,Cold War,Prototype,Very Heavy,Very Heavy,Very High,Large,Slow,High,Very High,No,No,No,Yes,No,No,No,No,No,No,No
AMX 30 1972,France,Modern,Tier I,Very Light,Light,Low,Medium,Fast,Low,Medium,No,No,No,Yes,No,Yes,No,No,No,No,No
AMX 10 P,France,Modern,Tier I,Light,Small Arms,Low,Medium,Normal,High,Medium,Yes,No,No,No,No,No,No,No,No,No,No
AMX 10 RC,France,Modern,Tier II,Very Light,Medium,High,Small,Very Fast,Low,High,No,No,No,Yes,No,Yes,Yes,No,No,No,No
AMX 10 RC Surblindé,France,Modern,Tier II,Very Light,Medium,High,Small,Very Fast,Low,High,No,No,No,Yes,No,Yes,Yes,No,No,No,No
AMX 30 B2,France,Modern,Tier II,Very Light,Medium,Medium,Medium,Fast,Low,Medium,No,No,No,Yes,No,Yes,Yes,No,No,No,No
VAB Mephisto,France,Modern,Tier II,Very Light,N/A,N/A,Small,Very Fast,None,High,No,No,No,No,No,Yes,No,No,Yes,No,No
VBC 90,France,Modern,Tier II,Very Light,Medium,High,Medium,Very Fast,Low,High,No,Yes,No,Yes,Yes,Yes,No,No,No,No,No
ERC 90 Sagaie,France,Modern,Tier II,Very Light,Medium,High,Medium,Very Fast,Low,High,No,Yes,No,Yes,Yes,Yes,No,No,No,No,No
AMX 10 RCR,France,Modern,Tier III,Very Light,Medium,High,Small,Very Fast,Medium,Very High,No,Yes,No,Yes,No,Yes,Yes,No,No,No,Yes
AMX 30 B2 Brenus,France,Modern,Tier III,Very Light,Medium,High,Medium,Fast,Low,Medium,No,No,No,Yes,No,Yes,Yes,Yes,No,No,Yes
VBCI  ,France,Modern,Tier III,Very Light,Very Light,Low,Large,Very Fast,High,High,Yes,Yes,No,Yes,No,Yes,Yes,No,No,No,No
VBCI 2,France,Modern,Tier III,Very Light,Light,Low,Large,Very Fast,High,High,Yes,Yes,No,Yes,No,Yes,Yes,No,No,Yes,No
Jaguar EBRC,France,Modern,Tier IV,Light,Light,Low,Medium,Very Fast,Medium,Very High,Yes,Yes,No,Yes,No,Yes,Yes,No,No,Yes,No
Leclerc S1 OP,France,Modern,Tier IV,Heavy,Very Heavy,Very High,Medium,Fast,Medium,High,No,Yes,Yes,Yes,Yes,Yes,Yes,No,No,No,No
Leclerc S2,France,Modern,Tier IV,Heavy,Very Heavy,Very High,Medium,Fast,Medium,High,No,Yes,Yes,Yes,Yes,Yes,Yes,No,No,No,No
Leclerc S XXI,France,Modern,Tier V,Heavy,Very Heavy,Very High,Medium,Fast,Medium,Very High,No,Yes,Yes,Yes,Yes,Yes,Yes,No,No,No,No
Leclerc AZUR,France,Modern,Tier V,Heavy,Very Heavy,Very High,Medium,Fast,Medium,Very High,No,Yes,Yes,Yes,Yes,Yes,Yes,Yes,No,No,No
Leclerc XLR,France,Modern,Tier V,Heavy,Very Heavy,Very High,Medium,Fast,Medium,Very High,No,Yes,Yes,Yes,Yes,Yes,Yes,Yes,No,No,No
Leclerc EVOLUTION,France,Modern,Prototype,Heavy,Very Heavy,Very High,Large,Fast,High,Very High,No,Yes,Yes,Yes,Yes,Yes,Yes,No,No,No,Yes
Suarer 4K4FA G2,Austria,Cold War,Tier I,Very Light,Very Light,Low,Small,Fast,Medium,Medium,Yes,No,No,No,No,No,No,No,No,No,No
Sk-105 A1,Austria,Cold War,Tier III,Very Light,Medium,Medium,Medium,Fast,Low,High,No,No,No,No,No,No,No,No,No,No,No
Sk-105 A2,Austria,Modern,Tier I,Very Light,Light,Medium,Medium,Fast,Low,High,No,No,No,No,Yes,No,No,No,No,No,No
Pandur I MTPz PAL,Austria,Modern,Tier II,Very Light,Small Arms,Low,Medium,Very Fast,Low,High,No,No,No,No,No,Yes,No,No,Yes,No,No
Flammwagen auf Panzerkampfwagen B-2 (f),German Reich,WW1-WW2,Tier III,Heavy,Medium,Medium,Large,Slow,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
7.5 cm PaK auf Geschützwagen FCM(f),German Reich,WW1-WW2,Tier III,Very Light,Medium,High,Medium,Slow,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
10.5 cm leFH 16 (Sf.) auf Geschützwagen FCM 36(f),German Reich,WW1-WW2,Tier III,Very Light,Medium,Medium,Medium,Slow,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
"4,7 cm PaK(t) auf Panzerkampfwagen 35R(f) ohne Turm",German Reich,WW1-WW2,Tier II,Very Light,Light,Medium,Small,Slow,Low,Medium,No,No,No,No,No,No,No,No,No,No,No
Challenger 2 Black Night,United Kingdom,Modern,Tier V,Very Heavy,Very Heavy,Very High,Large,Fast,High,Very High,No,Yes,No,Yes,No,Yes,Yes,No,No,No,Yes
T-72B3M Arena M,Russia,Modern,Tier V,Very Heavy,Very Heavy,Very High,Medium,Fast,High,Very High,No,Yes,Yes,Yes,Yes,Yes,Yes,Yes,No,Yes,Yes
T-90M2,Russia,Modern,Tier V,Very Heavy,Very Heavy,Very High,Medium,Very Fast,High,Very High,No,Yes,Yes,Yes,Yes,Yes,Yes,Yes,No,Yes,Yes
Char B1 bis (Eure),France,WW1-WW2,Event,Heavy,Medium,Medium,Large,Slow,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
M47 Patton 331,Austria,Cold War,Event,Medium,Medium,High,Medium,Normal,Medium,Medium,No,No,No,No,No,No,No,No,No,No,No
Tankora-72,Soviet Union,Modern,Event,Heavy,Medium,High,Medium,Fast,High,Medium,No,Yes,No,No,Yes,Yes,No,No,No,No,No
T-34 Model 1943 (Fallen Heroes),Soviet Union,WW1-WW2,Event,Medium,Medium,High,Medium,Fast,High,Medium,No,No,No,No,No,No,No,No,No,No,No
`;

    // --- UTILS ---
    const generateId = (tank) => {
        if (!tank || !tank.Name) return `unknown_${Math.random().toString(36).substr(2, 9)}`;
        const rawId = `${tank.Name}_${tank.Nation}_${tank.Age}_${tank.Rarity}`;
        return rawId.toLowerCase().replace(/[^a-z0-9]+/g, '_').replace(/^_+|_+$/g, '');
    };
    
    const generateLegacyId = (name) => {
        if (!name) return '';
        return name.toLowerCase().replace(/[^a-z0-9]+/g, '_').replace(/^_+|_+$/g, '');
    };

    const parseCSV = (text) => {
      const lines = text.trim().split('\n');
      const detectSeparator = (str) => str.includes('\t') ? '\t' : ',';
      const headerLine = lines[0];
      const headerSeparator = detectSeparator(headerLine);
      const headers = headerLine.split(headerSeparator).map(h => h.trim());
      return lines.slice(1)
        .filter(line => line.trim() !== '')
        .map((line, index) => {
          const separator = detectSeparator(line);
          const result = [];
          let current = '';
          let inQuotes = false;
          for (let i = 0; i < line.length; i++) {
            const char = line[i];
            if (char === '"') { inQuotes = !inQuotes; }
            else if (char === separator && !inQuotes) { result.push(current.trim()); current = ''; }
            else { current += char; }
          }
          result.push(current.trim());
          const obj = {};
          headers.forEach((header, i) => { obj[header] = result[i] || ''; });
          obj.id = generateId(obj); 
          return obj;
        });
    };

    const INITIAL_TANKS = parseCSV(rawCSV);

    // --- COMPONENTS ---
    const IconWrapper = ({ children, size = 24, className = "" }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>
    );

    const Icons = {
      Search: (props) => <IconWrapper {...props}><circle cx="11" cy="11" r="8" /><path d="m21 21-4.3-4.3" /></IconWrapper>,
      Filter: (props) => <IconWrapper {...props}><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3" /></IconWrapper>,
      Check: (props) => <IconWrapper {...props}><polyline points="20 6 9 17 4 12" /></IconWrapper>,
      X: (props) => <IconWrapper {...props}><path d="M18 6 6 18" /><path d="m6 6 12 12" /></IconWrapper>,
      Trash2: (props) => <IconWrapper {...props}><path d="M3 6h18" /><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6" /><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2" /><line x1="10" x2="10" y1="11" y2="17" /><line x1="14" x2="14" y1="11" y2="17" /></IconWrapper>,
      Database: (props) => <IconWrapper {...props}><ellipse cx="12" cy="5" rx="9" ry="3" /><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3" /><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5" /></IconWrapper>,
      Shield: (props) => <IconWrapper {...props}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10" /></IconWrapper>,
      Crosshair: (props) => <IconWrapper {...props}><circle cx="12" cy="12" r="10" /><line x1="22" x2="18" y1="12" y2="12" /><line x1="6" x2="2" y1="12" y2="12" /><line x1="12" x2="12" y1="6" y2="2" /><line x1="12" x2="12" y1="22" y2="18" /></IconWrapper>,
      Zap: (props) => <IconWrapper {...props}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" /></IconWrapper>,
      Scale: (props) => <IconWrapper {...props}><path d="m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z" /><path d="m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z" /><path d="M7 21h10" /><path d="M12 3v18" /><path d="M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2" /></IconWrapper>,
      Globe: (props) => <IconWrapper {...props}><circle cx="12" cy="12" r="10" /><line x1="2" x2="22" y1="12" y2="12" /><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" /></IconWrapper>,
      Eye: (props) => <IconWrapper {...props}><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z" /><circle cx="12" cy="12" r="3" /></IconWrapper>,
      Target: (props) => <IconWrapper {...props}><circle cx="12" cy="12" r="10" /><circle cx="12" cy="12" r="6" /><circle cx="12" cy="12" r="2" /></IconWrapper>,
      Info: (props) => <IconWrapper {...props}><circle cx="12" cy="12" r="10" /><path d="M12 16v-4" /><path d="M12 8h.01" /></IconWrapper>,
      Percent: (props) => <IconWrapper {...props}><line x1="19" x2="5" y1="5" y2="19" /><circle cx="6.5" cy="6.5" r="2.5" /><circle cx="17.5" cy="17.5" r="2.5" /></IconWrapper>,
      Plus: (props) => <IconWrapper {...props}><line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" /></IconWrapper>,
      Tank: (props) => <IconWrapper {...props}><path d="M2 12h20v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-6z" /><path d="M6 12L8 6h8l2 6" /><path d="M18 9h4" /><path d="M2 16h20" /></IconWrapper>,
      Box: (props) => <IconWrapper {...props}><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z" /><polyline points="3.27 6.96 12 12.01 20.73 6.96" /><line x1="12" y1="22.08" x2="12" y2="12" /></IconWrapper>,
      Crown: (props) => <IconWrapper {...props}><path d="m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14" /></IconWrapper>,
      Star: (props) => <IconWrapper {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" /></IconWrapper>,
      Award: (props) => <IconWrapper {...props}><circle cx="12" cy="8" r="7" /><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88" /></IconWrapper>,
      User: (props) => <IconWrapper {...props}><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" /><circle cx="12" cy="7" r="4" /></IconWrapper>,
      CheckCircle: (props) => <IconWrapper {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" /><polyline points="22 4 12 14.01 9 11.01" /></IconWrapper>,
      Gift: (props) => <IconWrapper {...props}><polyline points="20 12 20 22 4 22 4 12" /><rect width="20" height="5" x="2" y="7" /><line x1="12" x2="12" y1="22" y2="7" /><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z" /><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z" /></IconWrapper>,
      ToggleLeft: (props) => <IconWrapper {...props}><rect x="1" y="5" width="22" height="14" rx="7" ry="7" /><circle cx="8" cy="12" r="3" /></IconWrapper>,
      ToggleRight: (props) => <IconWrapper {...props}><rect x="1" y="5" width="22" height="14" rx="7" ry="7" /><circle cx="16" cy="12" r="3" /></IconWrapper>,
      Volume2: (props) => <IconWrapper {...props}><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" /><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07" /></IconWrapper>,
      VolumeX: (props) => <IconWrapper {...props}><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" /><line x1="23" y1="9" x2="17" y2="15" /><line x1="17" y1="9" x2="23" y2="15" /></IconWrapper>,
      Download: (props) => <IconWrapper {...props}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" /><polyline points="7 10 12 15 17 10" /><line x1="12" y1="15" x2="12" y2="3" /></IconWrapper>,
      Upload: (props) => <IconWrapper {...props}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" /><polyline points="17 8 12 3 7 8" /><line x1="12" y1="3" x2="12" y2="15" /></IconWrapper>,
      List: (props) => <IconWrapper {...props}><line x1="8" y1="6" x2="21" y2="6" /><line x1="8" y1="12" x2="21" y2="12" /><line x1="8" y1="18" x2="21" y2="18" /><line x1="3" y1="6" x2="3.01" y2="6" /><line x1="3" y1="12" x2="3.01" y2="12" /><line x1="3" y1="18" x2="3.01" y2="18" /></IconWrapper>,
      Grid: (props) => <IconWrapper {...props}><rect x="3" y="3" width="7" height="7" /><rect x="14" y="3" width="7" height="7" /><rect x="14" y="14" width="7" height="7" /><rect x="3" y="14" width="7" height="7" /></IconWrapper>,
      Sliders: (props) => <IconWrapper {...props}><line x1="4" y1="21" x2="4" y2="14" /><line x1="4" y1="10" x2="4" y2="3" /><line x1="12" y1="21" x2="12" y2="12" /><line x1="12" y1="8" x2="12" y2="3" /><line x1="20" y1="21" x2="20" y2="16" /><line x1="20" y1="12" x2="20" y2="3" /><line x1="1" y1="14" x2="7" y2="14" /><line x1="9" y1="8" x2="15" y2="8" /><line x1="17" y1="16" x2="23" y2="16" /></IconWrapper>,
      PieChart: (props) => <IconWrapper {...props}><path d="M21.21 15.89A10 10 0 1 1 8 2.83" /><path d="M22 12A10 10 0 0 0 12 2v10z" /></IconWrapper>,
      ArrowUp: (props) => <IconWrapper {...props}><line x1="12" y1="19" x2="12" y2="5" /><polyline points="5 12 12 5 19 12" /></IconWrapper>,
      Palette: (props) => <IconWrapper {...props}><circle cx="13.5" cy="6.5" r=".5"/><circle cx="17.5" cy="10.5" r=".5"/><circle cx="8.5" cy="7.5" r=".5"/><circle cx="6.5" cy="12.5" r=".5"/><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"/></IconWrapper>
    };

    const DrawTimer = ({ lang, theme }) => {
      const getInitialState = () => {
         try {
            const target = localStorage.getItem('drawTimerTarget');
            if (target) {
                const now = Date.now();
                const targetTime = parseInt(target, 10);
                const diff = Math.floor((targetTime - now) / 1000);
                if (diff > 0) return { time: diff, running: true };
            }
         } catch(e) {}
         return { time: 0, running: false };
      };

      const initialState = getInitialState();
      const [timeLeft, setTimeLeft] = useState(initialState.time);
      const [isRunning, setIsRunning] = useState(initialState.running);
      const [soundEnabled, setSoundEnabled] = useState(() => localStorage.getItem('soundEnabled') !== 'false');
      const audioRef = useRef(null);
      const titleIntervalRef = useRef(null);

      useEffect(() => {
        if (Notification.permission !== "granted" && Notification.permission !== "denied") {
            Notification.requestPermission();
        }
      }, []);

      useEffect(() => {
          if (!isRunning) return;

          const interval = setInterval(() => {
              const target = localStorage.getItem('drawTimerTarget');
              if (!target) {
                  setIsRunning(false);
                  setTimeLeft(0);
                  return;
              }

              const now = Date.now();
              const targetTime = parseInt(target, 10);
              const diff = Math.floor((targetTime - now) / 1000);

              if (diff <= 0) {
                  if (audioRef.current && soundEnabled) {
                      audioRef.current.play().catch(e => console.log("Audio error", e));
                  }
                  
                  if (Notification.permission === "granted") {
                      new Notification("Tankora DB", { body: "TON WORK EST DISPO !!!" });
                  }
                  
                  if (!titleIntervalRef.current) {
                      let showMsg = true;
                      titleIntervalRef.current = setInterval(() => {
                          document.title = showMsg ? "TON WORK EST DISPO !!!" : "Tankora DB";
                          showMsg = !showMsg;
                      }, 1000);
                  }

                  setIsRunning(false);
                  setTimeLeft(0);
                  localStorage.removeItem('drawTimerTarget');
              } else {
                  setTimeLeft(diff);
              }
          }, 1000);

          return () => clearInterval(interval);
      }, [isRunning, soundEnabled]);

      const startTimer = () => {
        if (titleIntervalRef.current) {
             clearInterval(titleIntervalRef.current);
             titleIntervalRef.current = null;
             document.title = "Tankora DB";
        }
        
        if (Notification.permission !== "granted" && Notification.permission !== "denied") {
            Notification.requestPermission();
        }
        
        const minutes = 30;
        const targetTime = Date.now() + minutes * 60 * 1000;
        localStorage.setItem('drawTimerTarget', targetTime.toString());
        setTimeLeft(minutes * 60);
        setIsRunning(true);
      };

      const cancelTimer = () => {
          if (titleIntervalRef.current) {
             clearInterval(titleIntervalRef.current);
             titleIntervalRef.current = null;
             document.title = "Tankora DB";
        }
          localStorage.removeItem('drawTimerTarget');
          setTimeLeft(0);
          setIsRunning(false);
      };
      
      const toggleSound = () => {
          const newState = !soundEnabled;
          setSoundEnabled(newState);
          localStorage.setItem('soundEnabled', newState);
      };

      const formatTime = (seconds) => {
        const m = Math.floor(seconds / 60);
        const s = seconds % 60;
        return `${m}:${s < 10 ? '0' : ''}${s}`;
      };

      const buttonClass = isRunning 
        ? 'bg-orange-500/20 text-orange-400 hover:bg-orange-500 hover:text-white'
        : `bg-${theme}-500 hover:bg-${theme}-400 text-white shadow-[0_0_10px_currentColor] shadow-${theme}-500`;

      const textClass = isRunning ? 'text-orange-400 animate-pulse' : `text-${theme}-400`;

      return (
        <div className="flex items-center gap-2 bg-slate-800/80 rounded-full border border-white/10 p-1 pr-4 shadow-inner ml-2 relative group">
            <audio ref={audioRef} src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3" preload="auto"></audio>
            
            <button onClick={toggleSound} className="w-8 h-8 flex items-center justify-center text-slate-400 hover:text-white transition-colors" title={soundEnabled ? "Mute" : "Unmute"}>
                {soundEnabled ? <Icons.Volume2 size={14} /> : <Icons.VolumeX size={14} />}
            </button>

            <button
                onClick={isRunning ? cancelTimer : startTimer}
                className={`w-8 h-8 rounded-full flex items-center justify-center transition-all z-20 relative ${buttonClass}`}
                title={isRunning ? (lang === 'fr' ? "Annuler le chrono" : "Cancel timer") : (lang === 'fr' ? "Lancer le chrono (30m)" : "Start timer (30m)")}
            >
                {isRunning ? <Icons.X size={16} /> : <Icons.Target size={16} />}
            </button>

            <div className="flex flex-col leading-none z-10">
                 <span className="text-[9px] font-bold text-slate-500 uppercase tracking-wider">
                    {isRunning ? (lang === 'fr' ? "Prochain Draw" : "Next Draw") : (lang === 'fr' ? "Prêt !" : "Ready!")}
                 </span>
                 <span className={`font-mono font-bold text-sm ${textClass}`}>
                    {isRunning ? formatTime(timeLeft) : (lang === 'fr' ? "J'AI WORK !" : "I DREW!")}
                 </span>
            </div>
            
            {!isRunning && (
                <button onClick={startTimer} className="absolute inset-0 z-10 cursor-pointer rounded-full" style={{ left: '32px' }} title="Lancer le chrono"></button>
            )}
        </div>
      );
    };

    const RadarChart = ({ data, size = 200, color }) => {
      const center = size / 2;
      const radius = size * 0.4;
      const angleStep = (Math.PI * 2) / data.length;

      const getCoordinates = (value, index) => {
        const angle = index * angleStep - Math.PI / 2;
        const r = (value / 100) * radius;
        const x = center + r * Math.cos(angle);
        const y = center + r * Math.sin(angle);
        return [x, y];
      };

      const points = data.map((d, i) => getCoordinates(d.value, i)).join(",");
      const levels = [0.25, 0.5, 0.75, 1];

      return (
        <div className="relative flex justify-center items-center" style={{ width: size, height: size }}>
          <svg width={size} height={size} className="overflow-visible" style={{filter: `drop-shadow(0 0 10px ${color}33)`}}> 
            {levels.map((level, idx) => (
              <polygon
                key={idx}
                points={data.map((_, i) => {
                  const angle = i * angleStep - Math.PI / 2;
                  const r = (level * 100 / 100) * radius;
                  return `${center + r * Math.cos(angle)},${center + r * Math.sin(angle)}`;
                }).join(",")}
                fill="none"
                stroke="#334155"
                strokeWidth="1"
                strokeDasharray="2 2"
                className="opacity-30"
              />
            ))}
            {data.map((_, i) => {
              const [x, y] = getCoordinates(100, i);
              return <line key={i} x1={center} y1={center} x2={x} y2={y} stroke="#334155" strokeWidth="1" className="opacity-30" />;
            })}
            <polygon points={points} fill={color} fillOpacity="0.2" stroke={color} strokeWidth="2" className="radar-path" />
            {data.map((d, i) => {
              const [x, y] = getCoordinates(d.value, i);
              return <circle key={i} cx={x} cy={y} r="3" fill={color} className="animate-in zoom-in" style={{ animationDelay: `${i * 0.1}s` }} />;
            })}
            {data.map((d, i) => {
              const angle = i * angleStep - Math.PI / 2;
              const r = radius + 20;
              const x = center + r * Math.cos(angle);
              const y = center + r * Math.sin(angle);
              return (
                <text
                  key={i}
                  x={x}
                  y={y}
                  textAnchor="middle"
                  dominantBaseline="middle"
                  fill="#94a3b8"
                  fontSize="10"
                  fontWeight="bold"
                  className="uppercase tracking-wider"
                >
                  {d.label}
                </text>
              );
            })}
          </svg>
        </div>
      );
    };

    const PieChart = ({ data }) => {
        const total = data.reduce((acc, curr) => acc + curr.value, 0);
        let currentAngle = 0;
        const gradientParts = data.map(item => {
            const percentage = (item.value / total) * 100;
            const endAngle = currentAngle + percentage;
            const part = `${item.color} ${currentAngle}% ${endAngle}%`;
            currentAngle = endAngle;
            return part;
        });

        const gradient = `conic-gradient(${gradientParts.join(', ')})`;

        return (
            <div className="flex flex-col items-center">
                <div className="w-40 h-40 rounded-full mb-4 shadow-lg border-4 border-slate-800" style={{ background: gradient }}></div>
                <div className="grid grid-cols-2 gap-x-4 gap-y-2 w-full max-w-xs">
                    {data.map((item, idx) => (
                        <div key={idx} className="flex items-center gap-2 text-xs">
                            <div className="w-3 h-3 rounded-full" style={{ backgroundColor: item.color }}></div>
                            <span className="text-slate-300 font-bold">{item.label}</span>
                            <span className="text-slate-500 ml-auto">{item.value}</span>
                        </div>
                    ))}
                </div>
            </div>
        );
    };

    const FilterDropdown = ({ value, onChange, options, icon: Icon, placeholder, theme }) => {
      const [isOpen, setIsOpen] = useState(false);
      return (
        <div className="relative w-full sm:w-auto">
          <button
            onClick={() => setIsOpen(!isOpen)}
            className={`w-full h-12 bg-[#0f141a] border ${isOpen ? `border-${theme}-500/50 ring-1 ring-${theme}-500/20` : 'border-white/10 hover:border-white/20'} rounded-none clip-corner-tr flex items-center justify-between px-4 min-w-[180px] transition-all group`}
          >
            <div className="flex items-center gap-3 overflow-hidden">
              {Icon && <Icon size={16} className={`transition-colors flex-shrink-0 ${value !== 'All' && value !== 'all' ? `text-${theme}-400` : 'text-slate-500 group-hover:text-slate-400'}`} />}
              <span className={`text-sm font-military tracking-wider truncate ${value !== 'All' && value !== 'all' ? `text-${theme}-400` : 'text-slate-400'}`}>
                {value === 'All' || value === 'all' ? placeholder : (options.find(o => o.value === value)?.label || value)}
              </span>
            </div>
            <div className={`transition-transform duration-300 flex-shrink-0 ${isOpen ? 'rotate-180' : ''}`}>
              <svg width="10" height="6" viewBox="0 0 10 6" fill="none"><path d="M1 1L5 5L9 1" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" className="text-slate-500" /></svg>
            </div>
          </button>
          {isOpen && (
            <>
              <div className="fixed inset-0 z-40" onClick={() => setIsOpen(false)}></div>
              <div className="absolute top-full left-0 w-full mt-2 bg-[#0f141a] border border-white/10 shadow-xl z-50 max-h-60 overflow-y-auto custom-scrollbar animate-in fade-in slide-in-from-bottom duration-200">
                {options.map((opt) => (
                  <button
                    key={opt.value}
                    className={`w-full text-left px-4 py-3 text-sm font-military tracking-wider border-b border-white/5 last:border-0 hover:bg-slate-800 transition-colors flex items-center justify-between ${value === opt.value ? `text-${theme}-400 bg-${theme}-900/10` : 'text-slate-400'}`}
                    onClick={() => { onChange({ target: { value: opt.value } }); setIsOpen(false); }}
                  >
                    <span className="truncate">{opt.label}</span>
                    {value === opt.value && <Icons.Check size={14} className="flex-shrink-0" />}
                  </button>
                ))}
              </div>
            </>
          )}
        </div>
      );
    };

    const ThemeSelector = ({ currentTheme, onThemeChange, translate }) => {
        const [isOpen, setIsOpen] = useState(false);
        const themes = Object.keys(THEME_COLORS);
        
        return (
            <div className="relative">
                <button onClick={() => setIsOpen(!isOpen)} className="w-8 h-8 flex items-center justify-center bg-slate-800 border border-white/10 rounded-full hover:bg-slate-700 transition-colors">
                    <div style={{color: THEME_COLORS[currentTheme].hex}}><Icons.Palette size={16} /></div>
                </button>
                
                {isOpen && (
                    <>
                        <div className="fixed inset-0 z-40" onClick={() => setIsOpen(false)}></div>
                        <div className="absolute top-full right-0 mt-2 bg-[#0f141a] border border-white/10 shadow-xl rounded-lg z-50 overflow-hidden min-w-[150px] animate-in fade-in slide-in-from-bottom">
                            {themes.map(t => (
                                <button 
                                    key={t}
                                    onClick={() => { onThemeChange(t); setIsOpen(false); }}
                                    className={`w-full text-left px-4 py-3 text-xs font-bold uppercase tracking-wider flex items-center gap-3 hover:bg-slate-800 transition-colors ${currentTheme === t ? 'bg-slate-800' : ''}`}
                                >
                                    <div className="w-3 h-3 rounded-full" style={{backgroundColor: THEME_COLORS[t].hex}}></div>
                                    <span className={currentTheme === t ? 'text-white' : 'text-slate-400'}>{translate(THEME_COLORS[t].label)}</span>
                                </button>
                            ))}
                        </div>
                    </>
                )}
            </div>
        );
    };
    
    const ToastContainer = ({ toasts, theme }) => {
        return (
            <div className="fixed bottom-4 right-4 z-[100] flex flex-col gap-2 pointer-events-none max-w-[90vw]">
                {toasts.map(toast => (
                    <div key={toast.id} className={`bg-slate-800 border-l-4 border-${theme}-500 text-white p-4 rounded shadow-lg flex items-center gap-3 animate-in slide-in-from-right-4`}>
                        <div className={`text-${theme}-500 flex-shrink-0`}><Icons.CheckCircle size={20} /></div>
                        <span className="font-medium text-sm truncate">{toast.message}</span>
                    </div>
                ))}
            </div>
        );
    };
    
    // NEW COMPARISON TABLE COMPONENT - NEUTRAL STYLE
    const ComparisonTable = ({ compareList, getStatValue, getStatColor, translate, tData, lang, theme }) => {
        const stats = [
             { label: 'armor', key: 'Armor' },
             { label: 'firepower', key: 'Firepower' },
             { label: 'mobility', key: 'Mobility' },
             { label: 'accuracy', key: 'Accuracy' },
             { label: 'visibility', key: 'Visibility' }
        ];

        const techs = [
             { key: 'Stabilizer', label: 'stabilizer' },
             { key: 'Thermal Vision', label: 'thermal' },
             { key: 'Night Vision', label: 'nightVision' },
             { key: 'ERA', label: 'era' },
             { key: 'APS', label: 'aps' },
             { key: 'Autoloader', label: 'autoloader' },
             { key: 'Rangefinder', label: 'rangefinder' },
             { key: 'Protected Ammo', label: 'protectedAmmo' },
             { key: 'ATGM (P)', label: 'atgm_p' }
        ];

        return (
            <div className="w-full overflow-x-auto custom-scrollbar pb-4">
                 <table className="compare-table w-full text-sm text-left">
                     <thead>
                         <tr>
                             <th className="p-4 bg-slate-900 sticky left-0 z-10 w-32 sm:w-40 border-b border-white/10 shadow-[2px_0_5px_rgba(0,0,0,0.5)]"></th>
                             {compareList.map(tank => (
                                 <th key={tank.id} className="p-4 bg-slate-900 border-b border-white/10 min-w-[160px]">
                                     <div className="flex flex-col items-center gap-2">
                                         <span className="text-[10px] text-slate-500 bg-slate-800 px-2 py-0.5 rounded whitespace-nowrap">{tData(tank.Nation)}</span>
                                         <span className="text-base sm:text-lg font-black text-white text-center leading-tight line-clamp-2 h-12 flex items-center">{tank.Name}</span>
                                         <span className={`text-[10px] text-${theme}-400 font-bold border border-${theme}-500/30 px-1.5 rounded`}>{tank.Rarity}</span>
                                     </div>
                                 </th>
                             ))}
                         </tr>
                     </thead>
                     <tbody>
                         {/* STATS */}
                         <tr className="bg-slate-800/50"><td colSpan={compareList.length + 1} className="p-2 text-xs font-bold text-slate-500 uppercase tracking-widest pl-4 sticky left-0 z-20 bg-slate-900/90 backdrop-blur-sm border-r border-white/10">Performance</td></tr>
                         {stats.map(stat => {
                             return (
                                 <tr key={stat.key} className="border-b border-white/5 hover:bg-white/5 transition-colors">
                                     <td className="p-3 font-medium text-slate-300 bg-slate-900/95 sticky left-0 z-10 border-r border-white/10 flex items-center gap-2 shadow-[2px_0_5px_rgba(0,0,0,0.5)]">
                                         <span className="truncate">{translate(stat.label)}</span>
                                     </td>
                                     {compareList.map(tank => {
                                         const val = getStatValue(tank[stat.key]);
                                         const displayVal = lang === 'fr' ? translateData(tank[stat.key], stat.key, lang) : tank[stat.key];
                                         
                                         return (
                                             <td key={`${tank.id}-${stat.key}`} className="p-3 text-center align-middle">
                                                 <span className="font-bold text-slate-300">
                                                     {displayVal}
                                                 </span>
                                             </td>
                                         );
                                     })}
                                 </tr>
                             );
                         })}

                         {/* TECHS */}
                         <tr className="bg-slate-800/50"><td colSpan={compareList.length + 1} className="p-2 text-xs font-bold text-slate-500 uppercase tracking-widest pl-4 sticky left-0 z-20 bg-slate-900/90 backdrop-blur-sm border-r border-white/10">Technologies</td></tr>
                         {techs.map(tech => (
                             <tr key={tech.key} className="border-b border-white/5 hover:bg-white/5 transition-colors">
                                 <td className="p-3 font-medium text-slate-300 bg-slate-900/95 sticky left-0 z-10 border-r border-white/10 shadow-[2px_0_5px_rgba(0,0,0,0.5)]">
                                     <span className="truncate">{translate(tech.label)}</span>
                                 </td>
                                 {compareList.map(tank => (
                                     <td key={`${tank.id}-${tech.key}`} className="p-3 text-center align-middle">
                                         {tank[tech.key] === 'Yes' ? 
                                             <span className={`inline-flex justify-center items-center w-6 h-6 rounded-full bg-${theme}-500/20 text-${theme}-400`}><Icons.Check size={14} strokeWidth={3}/></span> 
                                             : <span className="text-slate-700">-</span>
                                         }
                                     </td>
                                 ))}
                             </tr>
                         ))}
                     </tbody>
                 </table>
            </div>
        );
    };

    const getStatValue = (val) => {
      if (!val) return 0;
      const v = val.toLowerCase();
      if (v.includes('very high') || v.includes('very heavy') || v.includes('very fast')) return 100;
      if (v.includes('high') || v.includes('heavy') || v.includes('fast')) return 75;
      if (v.includes('medium') || v.includes('normal')) return 50;
      if (v.includes('low') || v.includes('light') || v.includes('slow')) return 25;
      if (v.includes('very low') || v.includes('very light') || v.includes('small arms') || v.includes('tiny')) return 10;
      return 0;
    };

    const getStatColor = (val) => {
      if (val >= 80) return 'bg-green-500';
      if (val >= 60) return 'bg-emerald-400';
      if (val >= 40) return 'bg-yellow-400';
      if (val >= 20) return 'bg-orange-400';
      return 'bg-red-500';
    };

    const getRarityColor = (tier) => {
      if (tier.includes('Tier I') && !tier.includes('II') && !tier.includes('III') && !tier.includes('IV') && !tier.includes('V')) return 'text-slate-300';
      if (tier.includes('Tier II') && !tier.includes('III')) return 'text-green-400';
      if (tier.includes('Tier III')) return 'text-blue-400';
      if (tier.includes('Tier IV')) return 'text-purple-400';
      if (tier.includes('Tier V')) return 'text-orange-400';
      if (tier.includes('Prototype')) return 'text-red-500';
      if (tier.includes('Event')) return 'text-yellow-400';
      return 'text-white';
    };
    
    const getTierRank = (rarity) => {
        if (rarity.includes('Tier I') && !rarity.includes('II') && !rarity.includes('V')) return 1;
        if (rarity.includes('Tier II') && !rarity.includes('III')) return 2;
        if (rarity.includes('Tier III')) return 3;
        if (rarity.includes('Tier IV')) return 4;
        if (rarity.includes('Tier V')) return 5;
        if (rarity.includes('Prototype')) return 6;
        if (rarity.includes('Event')) return 7;
        return 0;
    };

    const getAgeRank = (age) => {
        if (age === 'WW1-WW2') return 1;
        if (age === 'Cold War') return 2;
        if (age === 'Modern') return 3;
        return 99;
    };

    const getNationRank = (nation) => {
        if (nation === 'United States of America') return 10;
        if (nation === 'German Reich' || nation === 'Germany') return 20;
        if (nation === 'Soviet Union' || nation === 'Russia') return 30;
        if (nation === 'United Kingdom') return 40;
        if (nation === 'France') return 50;
        return 99;
    };

    const translateData = (val, key = '', lang = 'fr') => {
      if (lang === 'fr' && ['Firepower', 'Accuracy', 'Mobility', 'Visibility', 'Size'].includes(key)) {
        const feminineMap = {
          "Very High": "Très élevée", "High": "Élevée", "Medium": "Moyenne", "Heavy": "Lourde", "Very Heavy": "Très lourde", "Very Light": "Très légère", "Light": "Légère", "Slow": "Lente", "Very Slow": "Très lente", "Normal": "Normale", "Small": "Petite", "Large": "Grande", "Very Large": "Très grande", "Small Arms": "Armes légères"
        };
        if (feminineMap[val]) return feminineMap[val];
      }
      if (lang === 'fr') {
        return DATA_VALUE_MAP_FR[val] || val;
      }
      return val;
    };

    const StatBar = ({ label, value, rawValue, icon: Icon, lang, statKey }) => {
      const numValue = getStatValue(rawValue);
      const displayValue = lang === 'fr' ? translateData(rawValue, statKey, lang) : rawValue;
      const segments = Math.round(numValue / 10);
      return (
        <div className="mb-2.5">
          <div className="flex justify-between items-center text-[10px] text-slate-400 mb-1 uppercase tracking-wider font-semibold">
            <span className="flex items-center gap-1.5"><Icon size={12} className="text-slate-500" /> {label}</span>
            <span className="font-bold text-slate-200">{displayValue}</span>
          </div>
          <div className="h-2 w-full bg-slate-800/50 flex gap-0.5 p-0.5 border border-white/5 rounded-sm">
            {[...Array(10)].map((_, i) => (
              <div key={i} className={`flex-1 rounded-[1px] transition-all duration-500 ${i < segments ? getStatColor(numValue) : 'bg-slate-700/20'}`} style={{ opacity: i < segments ? 1 : 0.3 }}></div>
            ))}
          </div>
        </div>
      );
    };

    const BooleanBadge = ({ label, value, lang }) => {
      const isYes = value === 'Yes';
      if (!isYes) return null;
      return (
        <span className="inline-flex items-center gap-1 px-2 py-1 rounded bg-slate-700/50 border border-slate-600 text-[10px] text-slate-300">
          <Icons.Check size={10} className="text-green-400" /> {label}
        </span>
      );
    };
    
    // Supply Drop Modal
    const SupplyDropModal = ({ isOpen, onClose, onOpenDrop, isOpening, dropResult, lang }) => {
      if (!isOpen) return null;
      return (
        <div className="fixed inset-0 z-50 bg-black/90 backdrop-blur-md flex items-center justify-center p-4 animate-in fade-in duration-300" onClick={!isOpening ? onClose : undefined}>
          <div className="relative w-full max-w-lg bg-[#0f141a] border border-emerald-500/30 shadow-[0_0_50px_rgba(16,185,129,0.1)] rounded-3xl overflow-hidden flex flex-col items-center p-10 text-center mx-4" onClick={e => e.stopPropagation()}>
            <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-emerald-500 to-transparent opacity-50"></div>
            <div className="absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-emerald-500 to-transparent opacity-50"></div>
            {!dropResult ? (
              <>
                <div className="mb-8 relative">
                  <div className={`w-32 h-32 sm:w-48 sm:h-48 bg-slate-800 rounded-full flex items-center justify-center border-4 border-slate-700 shadow-inner ${isOpening ? 'animate-spin duration-[2s]' : ''}`}>
                    <Icons.Box size={80} className={`text-emerald-400 ${isOpening ? 'animate-pulse' : ''}`} />
                  </div>
                  {isOpening && <div className="absolute inset-0 rounded-full border-4 border-emerald-500 border-t-transparent animate-spin"></div>}
                </div>
                <h2 className="text-2xl sm:text-3xl font-military text-white uppercase tracking-widest mb-4">{lang === 'fr' ? 'Ravitaillement' : 'Supply Drop'}</h2>
                <p className="text-slate-400 mb-8 max-w-xs mx-auto text-xs sm:text-sm">{lang === 'fr' ? 'Ouvrez une caisse pour obtenir un véhicule aléatoire.' : 'Open a crate to receive a random vehicle for your collection.'}</p>
                <button onClick={onOpenDrop} disabled={isOpening} className="bg-emerald-600 hover:bg-emerald-500 text-white font-black uppercase tracking-widest py-3 px-8 sm:py-4 sm:px-10 rounded-xl clip-corner-tr shadow-[0_0_20px_rgba(16,185,129,0.4)] hover:shadow-[0_0_30px_rgba(16,185,129,0.6)] transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-3 text-base sm:text-lg w-full sm:w-auto justify-center">
                  {isOpening ? (lang === 'fr' ? 'Ouverture...' : 'Opening...') : (lang === 'fr' ? 'INITIALISER LE DROP' : 'INITIATE DROP')}
                </button>
              </>
            ) : (
              <div className="animate-in zoom-in duration-500 flex flex-col items-center w-full">
                <div className="text-emerald-400 font-military text-lg sm:text-xl uppercase tracking-[0.2em] mb-2 animate-pulse">{lang === 'fr' ? 'ACQUISITION RÉUSSIE' : 'ACQUISITION SUCCESSFUL'}</div>
                <div className="w-full h-1 bg-emerald-500/30 mb-8"></div>
                <div className="mb-6 relative group w-full max-w-sm">
                  <div className="absolute inset-0 bg-emerald-500/20 blur-xl rounded-full"></div>
                  <div className="tech-border bg-slate-900 p-6 rounded-2xl relative z-10 border border-emerald-500/50">
                    <span className="text-[10px] uppercase font-bold text-slate-400 mb-2 bg-slate-900 px-2 py-0.5 rounded-full block w-max mx-auto border border-white/10">{dropResult.Nation}</span>
                    <h3 className="text-2xl sm:text-3xl font-black text-white mb-2">{dropResult.Name}</h3>
                    <span className={`text-xs px-2 py-1 rounded font-bold border ${dropResult.Rarity.includes('Tier I') ? 'text-slate-400 border-slate-600' : 'text-yellow-400 border-yellow-500/50'}`}>{dropResult.Rarity}</span>
                  </div>
                </div>
                <button onClick={onClose} className="mt-8 text-slate-400 hover:text-white uppercase text-xs font-bold tracking-widest border-b border-transparent hover:border-white transition-all pb-1">{lang === 'fr' ? 'FERMER & REVENIR AU QG' : 'CLOSE & RETURN TO HQ'}</button>
              </div>
            )}
          </div>
        </div>
      );
    };

    // ==========================================
    // 4. PROFILE MODAL
    // ==========================================
    const ProfileModal = ({ isOpen, onClose, stats, lang, tanks, collection, setCollection, translate, addToast }) => {
      const [activeEra, setActiveEra] = useState('All');
      
      if (!isOpen) return null;
      
      const getGroupStats = (groupKey) => {
        const counts = {};
        const relevantTanks = activeEra !== 'All' ? tanks.filter(t => t.Age === activeEra) : tanks;
        relevantTanks.forEach(t => {
          const key = t[groupKey];
          if (!key) return;
          if (!counts[key]) counts[key] = { total: 0, owned: 0 };
          counts[key].total++;
        });
        Object.keys(collection).forEach(id => {
          // Changed comparison to be string-safe
          const tank = tanks.find(t => String(t.id) === String(id));
          if (tank && tank[groupKey] && counts[tank[groupKey]]) {
             if (activeEra !== 'All' && tank.Age !== activeEra) return;
             counts[tank[groupKey]].owned++;
          }
        });
        return Object.entries(counts).map(([label, data]) => ({ label, ...data, percent: Math.round((data.owned / data.total) * 100) })).sort((a, b) => b.percent - a.percent);
      };
      
      const nationStats = getGroupStats('Nation');
      const ageStats = getGroupStats('Age').sort((a, b) => getAgeRank(a.label) - getAgeRank(b.label));
      const tierStats = getGroupStats('Rarity').sort((a, b) => getTierRank(a.label) - getTierRank(b.label));
      
      // Data for Pie Chart
      const pieData = nationStats.slice(0, 5).map((stat, i) => ({
          label: translateData(stat.label, '', lang),
          value: stat.owned,
          color: ['#10b981', '#3b82f6', '#f59e0b', '#ef4444', '#8b5cf6'][i] || '#64748b'
      }));

      const handleCleanDuplicates = () => {
        if (window.confirm(translate('confirmClean'))) {
            const newCollection = {};
            Object.keys(collection).forEach(key => {
                const instances = collection[key];
                if (instances && instances.length > 0) {
                    // Find best condition based on rank
                    const best = instances.reduce((prev, current) => {
                        return (CONDITIONS[current].rank > CONDITIONS[prev].rank) ? current : prev;
                    });
                    newCollection[key] = [best];
                }
            });
            setCollection(newCollection);
            addToast(translate('cleanSuccess'));
        }
      };

      const handleExport = () => {
          const dataStr = JSON.stringify(collection);
          const blob = new Blob([dataStr], { type: "application/json" });
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = `tankora_save_${new Date().toISOString().slice(0,10)}.json`;
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
          addToast(translate('toastSaved'));
      };

      const handleImport = (event) => {
          const file = event.target.files[0];
          if (!file) return;

          const reader = new FileReader();
          reader.onload = (e) => {
              const content = e.target.result;

              // SECURITY: Strict input validation for JSON import
              if (file.name.endsWith('.json')) {
                  try {
                      const imported = JSON.parse(content);
                      const cleanCollection = {};
                      
                      // Validate structure: must be an object
                      if (typeof imported === 'object' && imported !== null) {
                          // Iterate through keys and validate
                          Object.keys(imported).forEach(key => {
                              // Ensure tank ID exists in database (simple check: if we have tanks)
                              // Note: We can't strictly validate ID against tanks array here easily without prop drilling, 
                              // but filtering out non-array values and invalid conditions is a huge security win.
                              
                              if (Array.isArray(imported[key])) {
                                  // Filter to only include valid conditions
                                  const validConditions = imported[key].filter(c => CONDITIONS[c]);
                                  
                                  if (validConditions.length > 0) {
                                      cleanCollection[key] = validConditions;
                                  }
                              }
                          });
                          
                          setCollection(cleanCollection);
                          addToast(translate('toastLoaded'));
                      } else {
                          alert(translate('fileError'));
                      }
                  } catch (err) {
                      alert(translate('fileError'));
                  }
                  return;
              }

              // Check if TXT (Discord Bot export) - Basic parsing with sanity check
              if (file.name.endsWith('.txt')) {
                  let newCollection = {}; 
                  const lines = content.split('\n');
                  let inTanksSection = false;

                  for (const line of lines) {
                      const l = line.trim();
                      if (l === 'Tanks Owned:') {
                          inTanksSection = true;
                          continue;
                      }
                      if (!inTanksSection) continue;
                      if (!l) continue;

                      const parts = l.split(' - ');
                      if (parts.length >= 2) {
                          // Sanitization: Escape potential HTML is handled by React rendering,
                          // but matching names against our DB ensures no random strings enter the system.
                          const name = parts[0].trim();
                          const rawCond = parts[1].trim();

                          let condId = 'field_ready';
                          if (rawCond.includes('salvage')) condId = 'salvage';
                          else if (rawCond.includes('damaged')) condId = 'damaged';
                          else if (rawCond.includes('worn')) condId = 'worn';
                          else if (rawCond.includes('field ready')) condId = 'field_ready';
                          else if (rawCond.includes('parade ready')) condId = 'parade_ready';
                          else if (rawCond.includes('factory new')) condId = 'factory_new';

                          const candidates = tanks.filter(t => t.Name === name);
                          let tankData = null;

                          if (candidates.length === 1) {
                              tankData = candidates[0];
                          } else if (candidates.length > 1) {
                              candidates.sort((a, b) => {
                                  const eraScore = { 'Modern': 3, 'Cold War': 2, 'WW1-WW2': 1 };
                                  const scoreA = (eraScore[a.Age] || 0);
                                  const scoreB = (eraScore[b.Age] || 0);
                                  if (scoreA !== scoreB) return scoreB - scoreA;
                                  return getTierRank(b.Rarity) - getTierRank(a.Rarity);
                              });
                              tankData = candidates[0];
                          }

                          if (tankData) {
                              if (!newCollection[tankData.id]) {
                                  newCollection[tankData.id] = [];
                              }
                              newCollection[tankData.id].push(condId);
                          }
                      }
                  }
                  
                  setCollection(newCollection);
                  addToast(translate('toastLoaded'));
                  return;
              }
              
              alert(translate('fileError'));
          };
          reader.readAsText(file);
      };
      
      return (
        <div className="fixed inset-0 z-50 bg-slate-900/90 backdrop-blur-md flex items-center justify-center p-4 animate-in fade-in duration-300" onClick={onClose}>
          <div className="bg-[#0f141a] w-full max-w-5xl max-h-[90vh] rounded-3xl border border-white/10 shadow-2xl overflow-hidden flex flex-col md:flex-row animate-in slide-in-from-bottom duration-300" onClick={e => e.stopPropagation()}>
            <div className="w-full md:w-1/4 bg-slate-900 border-r border-white/5 p-6 flex flex-col items-center text-center relative overflow-hidden justify-center md:min-h-[500px]">
              <div className="absolute inset-0 bg-gradient-to-b from-blue-500/5 to-transparent pointer-events-none"></div>
              <h2 className="text-xl font-black text-white uppercase tracking-wider mb-6 flex items-center gap-2"><Icons.Database className="text-blue-500"/> {lang === 'fr' ? 'Rapport' : 'Report'}</h2>
              <div className="w-full space-y-3 mb-6">
                <div className="flex justify-between items-center p-2.5 bg-slate-800/50 rounded-lg border border-white/5">
                  <span className="text-[10px] text-slate-400 uppercase">{lang === 'fr' ? 'Véhicules' : 'Vehicles'}</span>
                  <span className="font-mono font-bold text-sm text-white">{stats.total}</span>
                </div>
                <div className="flex justify-between items-center p-2.5 bg-slate-800/50 rounded-lg border border-white/5">
                  <span className="text-[10px] text-slate-400 uppercase">{lang === 'fr' ? 'Modèles' : 'Models'}</span>
                  <span className="font-mono font-bold text-sm text-emerald-400">{stats.unique}</span>
                </div>
              </div>
              
              {/* PIE CHART */}
              {stats.unique > 0 && (
                  <div className="mb-6 w-full flex flex-col items-center">
                      <h4 className="text-[10px] text-slate-500 uppercase font-bold mb-2">{translate('distribution')}</h4>
                      <PieChart data={pieData} />
                  </div>
              )}

              <div className="w-full pt-6 border-t border-white/5 flex flex-col gap-2 mt-auto">
                 <h4 className="text-[10px] text-slate-500 uppercase font-bold mb-1">{translate('dataManagement')}</h4>
                 <button onClick={handleCleanDuplicates} className="w-full py-2 bg-slate-800 hover:bg-slate-700 text-xs font-bold text-orange-400 rounded border border-white/5 flex items-center justify-center gap-2 transition-colors"><Icons.Trash2 size={14}/> {translate('cleanDuplicates')}</button>
                 <button onClick={handleExport} className="w-full py-2 bg-slate-800 hover:bg-slate-700 text-xs font-bold text-emerald-400 rounded border border-white/5 flex items-center justify-center gap-2 transition-colors"><Icons.Download size={14}/> {translate('exportData')}</button>
                 <label className="w-full py-2 bg-slate-800 hover:bg-slate-700 text-xs font-bold text-blue-400 rounded border border-white/5 flex items-center justify-center gap-2 transition-colors cursor-pointer">
                    <Icons.Upload size={14}/> {translate('importData')}
                    <input type="file" accept=".json,.txt" className="hidden" onChange={handleImport} />
                 </label>
              </div>
            </div>
            <div className="flex-1 p-8 overflow-y-auto custom-scrollbar bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDQwIDQwIiBmaWxsPSJub25lIiBzdHJva2U9IiMzMzQxNTUiIHN0cm9rZS1vcGFjaXR5PSIwLjAzIiBzdHJva2Utd2lkdGg9IjEiPjxwYXRoIGQ9Ik0wIDQwaDQwTTAgMGg0MCIvPjwvc3ZnPg==')]">
              <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
                <h3 className="text-xl font-bold text-white flex items-center gap-2 uppercase tracking-wide"><Icons.Database className="text-blue-500" /> {lang === 'fr' ? 'Progression Détaillée' : 'Detailed Progression'}</h3>
                <div className="flex flex-wrap items-center gap-2">
                    <button onClick={() => setActiveEra(activeEra === 'WW1-WW2' ? 'All' : 'WW1-WW2')} className={`flex items-center gap-2 px-3 py-1.5 rounded-full border text-[10px] font-bold transition-all ${activeEra === 'WW1-WW2' ? 'bg-amber-600 border-amber-500 text-white' : 'bg-slate-800 border-white/10 text-slate-400 hover:text-white'}`}>{activeEra === 'WW1-WW2' ? <Icons.ToggleRight size={14} /> : <Icons.ToggleLeft size={14} />} PGM-SGM</button>
                    <button onClick={() => setActiveEra(activeEra === 'Cold War' ? 'All' : 'Cold War')} className={`flex items-center gap-2 px-3 py-1.5 rounded-full border text-[10px] font-bold transition-all ${activeEra === 'Cold War' ? 'bg-sky-600 border-sky-500 text-white' : 'bg-slate-800 border-white/10 text-slate-400 hover:text-white'}`}>{activeEra === 'Cold War' ? <Icons.ToggleRight size={14} /> : <Icons.ToggleLeft size={14} />} {lang === 'fr' ? 'Guerre Froide' : 'Cold War'}</button>
                    <button onClick={() => setActiveEra(activeEra === 'Modern' ? 'All' : 'Modern')} className={`flex items-center gap-2 px-3 py-1.5 rounded-full border text-[10px] font-bold transition-all ${activeEra === 'Modern' ? 'bg-emerald-600 border-emerald-500 text-white' : 'bg-slate-800 border-white/10 text-slate-400 hover:text-white'}`}>{activeEra === 'Modern' ? <Icons.ToggleRight size={14} /> : <Icons.ToggleLeft size={14} />} {lang === 'fr' ? 'Moderne' : 'Modern'}</button>
                    <button onClick={onClose} className="text-slate-500 hover:text-white transition-colors ml-2"><Icons.X size={24} /></button>
                </div>
              </div>
              <div className="space-y-8 animate-in fade-in slide-in-from-right-4 duration-300">
                <div>
                  <h4 className="text-xs uppercase font-bold text-slate-500 mb-3 flex items-center gap-2"><Icons.Globe size={14} /> {lang === 'fr' ? 'Par Nation' : 'By Nation'}</h4>
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                    {nationStats.map((stat, i) => (
                      <div key={i} className="bg-slate-800/40 p-3 rounded-xl border border-white/5 flex items-center gap-4">
                        <div className="w-8 h-5 rounded overflow-hidden relative"><div className="absolute inset-0 bg-slate-700"></div></div>
                        <div className="flex-1">
                          <div className="flex justify-between text-xs mb-1"><span className="font-bold text-slate-300">{translateData(stat.label, '', lang)}</span><span className="font-mono text-slate-400">{stat.owned}/{stat.total}</span></div>
                          <div className="h-1.5 w-full bg-slate-900 rounded-full overflow-hidden"><div className="h-full bg-emerald-500" style={{ width: `${stat.percent}%` }}></div></div>
                        </div>
                        <span className="text-xs font-bold text-emerald-400 w-10 text-right">{stat.percent}%</span>
                      </div>
                    ))}
                  </div>
                </div>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                  <div>
                    <h4 className="text-xs uppercase font-bold text-slate-500 mb-3 flex items-center gap-2"><Icons.Info size={14} /> {lang === 'fr' ? 'Par Époque' : 'By Era'}</h4>
                    <div className="space-y-3">{ageStats.map((stat, i) => (<div key={i}><div className="flex justify-between text-[10px] uppercase font-bold text-slate-400 mb-1"><span>{translateData(stat.label, '', lang)}</span><span>{stat.percent}%</span></div><div className="h-1.5 w-full bg-slate-900 rounded-full overflow-hidden border border-white/5"><div className="h-full bg-blue-500" style={{ width: `${stat.percent}%` }}></div></div></div>))}</div>
                  </div>
                  <div>
                    <h4 className="text-xs uppercase font-bold text-slate-500 mb-3 flex items-center gap-2"><Icons.Target size={14} /> {lang === 'fr' ? 'Par Tier' : 'By Tier'}</h4>
                    <div className="space-y-3">{tierStats.map((stat, i) => (<div key={i}><div className="flex justify-between text-[10px] uppercase font-bold text-slate-400 mb-1"><span>{stat.label}</span><span>{stat.owned}/{stat.total}</span></div><div className="h-1.5 w-full bg-slate-900 rounded-full overflow-hidden border border-white/5"><div className={`h-full ${stat.percent === 100 ? 'bg-yellow-400' : 'bg-slate-600'}`} style={{ width: `${stat.percent}%` }}></div></div></div>))}</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      )
    };

    // ==========================================
    // 5. APPLICATION
    // ==========================================

    function TankApp() {
      // OPTIMIZATION: Use static initial data
      const [tanks, setTanks] = useState(INITIAL_TANKS);
      
      // AUTO-CLEANUP: Remove invalid IDs from collection on load
      // This prevents UI crashes if an ID doesn't exist anymore or changed format
      const [collection, setCollection] = useState(() => { 
          try { 
              const saved = localStorage.getItem('tankCollection'); 
              const parsed = saved ? JSON.parse(saved) : {};
              
              // Validate keys against current tank DB
              const validCollection = {};
              const currentIds = new Set(INITIAL_TANKS.map(t => t.id));
              
              // Map legacy IDs (name only) to new IDs
              // We create a map of "legacy_id" -> [list of matching new IDs]
              // Example: "t_80" -> ["t_80_soviet_union_ww1_ww2_tier_ii", "t_80_soviet_union_modern_tier_iv"]
              const legacyMap = {};
              INITIAL_TANKS.forEach(tank => {
                  const legId = generateLegacyId(tank.Name);
                  if (!legacyMap[legId]) legacyMap[legId] = [];
                  legacyMap[legId].push(tank.id);
              });

              Object.keys(parsed).forEach(key => {
                  // Case 1: ID is valid and exists in current DB (New format already)
                  if (currentIds.has(key)) {
                      validCollection[key] = parsed[key];
                  } 
                  // Case 2: ID is legacy (Old format), try to migrate
                  else if (legacyMap[key]) {
                      // If legacy ID matches multiple new IDs (like T-80), we give the item to ALL matching tanks
                      // This is generous but prevents data loss. The user can then delete the one they don't want.
                      // For T-80, this means they will get both the WW2 and Modern version if they had "t_80".
                      legacyMap[key].forEach(newId => {
                           // Merge with existing if any (unlikely during init but good practice)
                           const existing = validCollection[newId] || [];
                           validCollection[newId] = [...existing, ...parsed[key]];
                      });
                  }
                  // Case 3: Legacy Index-based ID (Numeric) - FIX FOR PREVIOUS VERSION
                  else if (!isNaN(key) && INITIAL_TANKS[parseInt(key)]) {
                       const newId = INITIAL_TANKS[parseInt(key)].id;
                       const existing = validCollection[newId] || [];
                       validCollection[newId] = [...existing, ...parsed[key]];
                  }
              });
              
              return validCollection;
          } catch (e) { return {}; } 
      });
      
      const [compareList, setCompareList] = useState([]);
      const [showCompare, setShowCompare] = useState(false);
      const [viewTank, setViewTank] = useState(null);
      const [showDropRates, setShowDropRates] = useState(false);
      const [lang, setLang] = useState('fr');
      const [theme, setTheme] = useState(() => localStorage.getItem('tankoraTheme') || 'emerald');

      // New State for Features
      const [showSupply, setShowSupply] = useState(false);
      const [isOpeningDrop, setIsOpeningDrop] = useState(false);
      const [dropResult, setDropResult] = useState(null);
      const [showProfile, setShowProfile] = useState(false);
      
      const [visualsEnabled, setVisualsEnabled] = useState(true);

      const [visibleCount, setVisibleCount] = useState(20);
      const [viewMode, setViewMode] = useState('grid');
      const [sortBy, setSortBy] = useState('none');
      const [showAdvanced, setShowAdvanced] = useState(false);
      const [advancedFilters, setAdvancedFilters] = useState({ 
          stabilizer: false, 
          thermal: false, 
          nightVision: false, 
          era: false, 
          aps: false,
          autoloader: false,
          autocannon: false,
          rangefinder: false,
          protectedAmmo: false,
          missile: false, // ATGM (P)
          missile_s: false // ATGM (S)
      });
      const [toasts, setToasts] = useState([]);
      const [showBackToTop, setShowBackToTop] = useState(false);
      
      const scrollContainerRef = useRef(null);
      const translate = (key) => TRANSLATIONS[lang][key] || key;
      const tData = (val, key) => translateData(val, key, lang);
      const [search, setSearch] = useState('');
      const [filterNation, setFilterNation] = useState('All');
      const [filterAge, setFilterAge] = useState('All');
      const [filterRarity, setFilterRarity] = useState('All');
      const [ownershipFilter, setOwnershipFilter] = useState('all');

      const addToast = (message) => {
          const id = Date.now();
          setToasts(prev => [...prev, { id, message }]);
          setTimeout(() => setToasts(prev => prev.filter(t => t.id !== id)), 3000);
      };

      useEffect(() => { try { localStorage.setItem('tankCollection', JSON.stringify(collection)); } catch (e) {} }, [collection]);
      useEffect(() => { localStorage.setItem('tankoraTheme', theme); }, [theme]);
      
      useEffect(() => { setVisibleCount(20); if (scrollContainerRef.current) { scrollContainerRef.current.scrollTop = 0; } }, [search, filterNation, filterAge, filterRarity, ownershipFilter, sortBy, advancedFilters]);
      const handleScroll = (e) => { 
        const { scrollTop, scrollHeight, clientHeight } = e.target; 
        if (scrollHeight - scrollTop <= clientHeight * 1.5) { setVisibleCount(prev => prev + 20); } 
        if (scrollTop > 300) setShowBackToTop(true); else setShowBackToTop(false);
      };
      
      // Removed useEffect for CSV parsing since it's done statically

      const addTankInstance = (tankId, condition = null) => {
        const tank = tanks.find(t => t.id === tankId);
        setCollection(prev => {
          const current = prev[tankId] || [];
          let newCond = condition;
          if (!newCond) {
            const rand = Math.random();
            if (rand < 0.01) newCond = 'salvage'; else if (rand < 0.21) newCond = 'damaged'; else if (rand < 0.61) newCond = 'worn'; else if (rand < 0.91) newCond = 'field_ready'; else if (rand < 0.96) newCond = 'parade_ready'; else newCond = 'factory_new';
          }
          return { ...prev, [tankId]: [...current, newCond] };
        });
        if(tank && !condition) addToast(`${tank.Name} ${translate('toastAdded')}`);
      };

      const initiateSupplyDrop = () => {
        if (isOpeningDrop) return;
        setIsOpeningDrop(true);
        setDropResult(null);
        setTimeout(() => {
          if (tanks.length > 0) {
            const randomTank = tanks[Math.floor(Math.random() * tanks.length)];
            const roll = Math.random();
            let condition = 'field_ready';
            if (roll > 0.95) condition = 'factory_new'; else if (roll > 0.8) condition = 'parade_ready'; else if (roll < 0.1) condition = 'damaged';
            addTankInstance(randomTank.id, condition);
            setDropResult({ ...randomTank, condition });
          }
          setIsOpeningDrop(false);
        }, 2500);
      };

      const removeTankInstance = (tankId, index) => {
        const newCollection = { ...collection };
        if (newCollection[tankId]) {
          const newArr = newCollection[tankId].filter((_, i) => i !== index);
          if (newArr.length === 0) { delete newCollection[tankId]; } else { newCollection[tankId] = newArr; }
          setCollection(newCollection);
        }
      };

      const updateInstanceCondition = (tankId, index, condition) => {
        const newCollection = { ...collection };
        if (newCollection[tankId] && newCollection[tankId][index]) {
          const newArr = [...newCollection[tankId]];
          newArr[index] = condition;
          newCollection[tankId] = newArr;
          setCollection(newCollection);
        }
      };

      const resetFilters = () => { 
          setSearch(''); setFilterNation('All'); setFilterAge('All'); setFilterRarity('All'); setOwnershipFilter('all'); 
          setAdvancedFilters({ stabilizer: false, thermal: false, nightVision: false, era: false, aps: false, autoloader: false, autocannon: false, rangefinder: false, protectedAmmo: false, missile: false, missile_s: false });
          setSortBy('none');
      };
      useEffect(() => { const scanline = document.querySelector('.scanline'); if (scanline) scanline.style.display = visualsEnabled ? 'block' : 'none'; }, [visualsEnabled]);
      const toggleCompare = (tank) => { if (compareList.find(t => t.Name === tank.Name)) { setCompareList(compareList.filter(t => t.Name !== tank.Name)); } else { if (compareList.length < 4) { setCompareList([...compareList, tank]); } else { alert(lang === 'fr' ? "Maximum 4 chars." : "Max 4 tanks."); } } };
      
      const uniqueNations = useMemo(() => { const nations = new Set(tanks.map(t => t.Nation).filter(n => n && !n.match(/\d/) && n.length < 30)); return ['All', ...[...nations].sort()]; }, [tanks]);
      const uniqueAges = useMemo(() => { const ages = new Set(tanks.map(t => t.Age).filter(a => a && !a.match(/\d{3,}/) && a.length < 20)); return ['All', ...[...ages].sort()]; }, [tanks]);
      const uniqueRarities = useMemo(() => { const rarities = new Set(tanks.map(t => t.Rarity).filter(r => r && (r.includes('Tier') || r === 'Prototype' || r === 'Event'))); return ['All', ...[...rarities].sort()]; }, [tanks]);
      
      const filteredTanks = useMemo(() => {
        let result = tanks.filter(tank => {
          const searchTerm = String(search).toLowerCase();
          const matchSearch = tank.Name.toLowerCase().includes(searchTerm);
          const matchNation = filterNation === 'All' || tank.Nation === filterNation;
          const matchAge = filterAge === 'All' || tank.Age === filterAge;
          const matchRarity = filterRarity === 'All' || tank.Rarity === filterRarity;
          let matchOwnership = true;
          if (ownershipFilter === 'owned') { matchOwnership = collection[tank.id] !== undefined; } 
          else if (ownershipFilter === 'missing') { matchOwnership = collection[tank.id] === undefined; } 
          else if (ownershipFilter === 'duplicates') { matchOwnership = collection[tank.id] && collection[tank.id].length >= 2; }
          
          let matchAdvanced = true;
          if (advancedFilters.stabilizer && tank.Stabilizer !== 'Yes') matchAdvanced = false;
          if (advancedFilters.thermal && tank['Thermal Vision'] !== 'Yes') matchAdvanced = false;
          if (advancedFilters.nightVision && tank['Night Vision'] !== 'Yes') matchAdvanced = false;
          if (advancedFilters.era && tank.ERA !== 'Yes') matchAdvanced = false;
          if (advancedFilters.aps && tank.APS !== 'Yes') matchAdvanced = false;
          if (advancedFilters.autoloader && tank.Autoloader !== 'Yes') matchAdvanced = false;
          if (advancedFilters.autocannon && tank.Autocannon !== 'Yes') matchAdvanced = false;
          if (advancedFilters.rangefinder && tank.Rangefinder !== 'Yes') matchAdvanced = false;
          if (advancedFilters.protectedAmmo && tank['Protected Ammo'] !== 'Yes') matchAdvanced = false;
          if (advancedFilters.missile && tank['ATGM (P)'] !== 'Yes') matchAdvanced = false;
          if (advancedFilters.missile_s && tank['ATGM (S)'] !== 'Yes') matchAdvanced = false;

          return matchSearch && matchNation && matchAge && matchRarity && matchOwnership && matchAdvanced;
        });

        if (sortBy !== 'none') {
            result.sort((a, b) => {
                if (sortBy === 'name_asc') return a.Name.localeCompare(b.Name);
                if (sortBy === 'name_desc') return b.Name.localeCompare(a.Name);
                if (sortBy === 'nation') {
                    const nationDiff = getNationRank(a.Nation) - getNationRank(b.Nation);
                    if (nationDiff !== 0) return nationDiff;
                    const ageDiff = getAgeRank(a.Age) - getAgeRank(b.Age);
                    if (ageDiff !== 0) return ageDiff;
                    const tierDiff = getTierRank(a.Rarity) - getTierRank(b.Rarity);
                    if (tierDiff !== 0) return tierDiff;
                    return a.Name.localeCompare(b.Name);
                }
                if (sortBy === 'tier_asc') {
                    const tierDiff = getTierRank(a.Rarity) - getTierRank(b.Rarity);
                    if (tierDiff !== 0) return tierDiff;
                    const nationDiff = getNationRank(a.Nation) - getNationRank(b.Nation);
                    if (nationDiff !== 0) return nationDiff;
                    const ageDiff = getAgeRank(a.Age) - getAgeRank(b.Age);
                    if (ageDiff !== 0) return ageDiff;
                    return a.Name.localeCompare(b.Name);
                }
                if (sortBy === 'tier_desc') {
                    const tierDiff = getTierRank(b.Rarity) - getTierRank(a.Rarity);
                    if (tierDiff !== 0) return tierDiff;
                    const nationDiff = getNationRank(a.Nation) - getNationRank(b.Nation);
                    if (nationDiff !== 0) return nationDiff;
                    const ageDiff = getAgeRank(a.Age) - getAgeRank(b.Age);
                    if (ageDiff !== 0) return ageDiff;
                    return a.Name.localeCompare(b.Name);
                }
                return 0; 
            });
        }
        return result;
      }, [tanks, search, filterNation, filterAge, filterRarity, ownershipFilter, collection, sortBy, advancedFilters]);

      const collectionStats = useMemo(() => {
        const uniqueOwned = Object.keys(collection).length;
        const totalItems = Object.values(collection).reduce((acc, curr) => acc + curr.length, 0);
        return { total: tanks.length, uniqueOwned: uniqueOwned, totalItems: totalItems, percent: tanks.length > 0 ? Math.round((uniqueOwned / tanks.length) * 100) : 0 };
      }, [tanks, collection]);

      const toggleAdvFilter = (key) => {
          setAdvancedFilters(prev => ({...prev, [key]: !prev[key]}));
      };

      return (
        <div className="h-full flex flex-col bg-slate-900 text-slate-100 font-sans transition-colors duration-500">
          <ToastContainer toasts={toasts} theme={theme} />
          
          <header className="bg-slate-900/80 backdrop-blur-md border-b border-white/10 sticky top-0 z-30 shadow-lg flex-shrink-0">
            <div className="max-w-[1600px] mx-auto px-4 py-4">
              <div className="flex flex-col md:flex-row md:items-center justify-between gap-6">
                <div>
                  <h1 className="text-4xl md:text-5xl font-military uppercase tracking-wider text-slate-100 flex items-center gap-4 drop-shadow-[0_0_10px_rgba(255,255,255,0.2)]">
                    <span className={`text-${theme}-500 drop-shadow-[0_0_15px_rgba(255,255,255,0.5)]`} style={{color: THEME_COLORS[theme].hex}}><Icons.Tank size={42} strokeWidth={2.5} /></span>
                    <span>Tankora <span style={{color: THEME_COLORS[theme].hex}}>DB</span></span>
                    <span className="text-[10px] font-sans font-bold bg-slate-800 text-slate-400 px-2 py-1 rounded border border-white/10 ml-2 self-start mt-2">v2.15</span>
                  </h1>
                  <div className="text-xs font-medium text-slate-400 mt-2 flex flex-col sm:flex-row sm:items-center gap-3">
                    <span className="flex items-center gap-1.5 bg-slate-800/50 px-3 py-1 rounded-full border border-white/5 cursor-pointer hover:bg-slate-800 transition-colors group" onClick={() => setShowProfile(true)} title={translate('details')}>
                      {translate('uniqueModels')} : <span className="font-bold group-hover:brightness-110" style={{color: THEME_COLORS[theme].hex}}>{collectionStats.uniqueOwned}</span> / {collectionStats.total}
                      <span className={`bg-${theme}-500/20 px-1.5 py-0.5 rounded text-[10px] ml-1 border border-${theme}-500/20`} style={{color: THEME_COLORS[theme].hex}}>{collectionStats.percent}%</span>
                      <Icons.Database size={12} className="ml-1 opacity-50 group-hover:opacity-100" />
                    </span>
                    <span className="hidden sm:inline text-slate-700">|</span>
                    <span className="flex items-center gap-1.5 bg-slate-800/50 px-3 py-1 rounded-full border border-white/5">
                      {translate('totalVehicles')} : <span className="text-blue-400 font-bold">{collectionStats.totalItems}</span>
                    </span>
                  </div>
                  <div className="w-full max-w-[320px] h-3 bg-slate-900/80 rounded-sm mt-3 overflow-hidden border border-white/10 relative cursor-pointer group shadow-inner" onClick={() => setShowProfile(true)} title={`${lang === 'fr' ? 'Progression totale' : 'Total Progress'}: ${collectionStats.percent}%`}>
                    <div className="absolute inset-0 flex z-10 opacity-20 pointer-events-none" style={{ backgroundImage: 'linear-gradient(90deg, transparent 2px, #000 2px)', backgroundSize: '10% 100%' }}></div>
                    <div className="h-full relative -z-0 transition-all duration-700 ease-out group-hover:brightness-110" style={{ width: `${collectionStats.percent}%`, boxShadow: `0 0 15px ${THEME_COLORS[theme].hex}66`, background: `linear-gradient(to right, ${THEME_COLORS[theme].hex}, ${THEME_COLORS[theme].hex})` }}><div className="absolute right-0 top-0 bottom-0 w-0.5 bg-white/60 blur-[1px]"></div></div>
                  </div>
                </div>
                <div className="flex items-center gap-3">
                  <div className="flex items-center bg-slate-800/80 rounded-full border border-white/10 p-1 shadow-inner">
                    <button onClick={() => setLang('fr')} className={`p-2 rounded-full transition-all duration-300 ${lang === 'fr' ? 'bg-slate-700 shadow-md transform scale-105 ring-1 ring-white/10' : 'opacity-50 hover:opacity-100 grayscale'}`} title="Français"><svg width="20" height="14" viewBox="0 0 3 2" className="rounded-sm shadow-sm"><rect width="3" height="2" fill="#ED2939" /><rect width="2" height="2" fill="#fff" /><rect width="1" height="2" fill="#002395" /></svg></button>
                    <div className="w-px h-4 bg-white/10 mx-1"></div>
                    <button onClick={() => setLang('en')} className={`p-2 rounded-full transition-all duration-300 ${lang === 'en' ? 'bg-slate-700 shadow-md transform scale-105 ring-1 ring-white/10' : 'opacity-50 hover:opacity-100 grayscale'}`} title="English (US)"><svg width="20" height="14" viewBox="0 0 20 12" className="rounded-sm shadow-sm"><rect width="20" height="12" fill="#fff" /><path d="M0,0H20V1.5H0z M0,3H20V4.5H0z M0,6H20V7.5H0z M0,9H20V10.5H0z" fill="#B22234" /><rect width="9" height="6.5" fill="#3C3B6E" /><g fill="#fff"><circle cx="1.5" cy="1.3" r="0.5" /> <circle cx="4.5" cy="1.3" r="0.5" /> <circle cx="7.5" cy="1.3" r="0.5" /><circle cx="3" cy="3.2" r="0.5" /> <circle cx="6" cy="3.2" r="0.5" /><circle cx="1.5" cy="5.2" r="0.5" /> <circle cx="4.5" cy="5.2" r="0.5" /> <circle cx="7.5" cy="5.2" r="0.5" /></g></svg></button>
                  </div>
                  <ThemeSelector currentTheme={theme} onThemeChange={setTheme} translate={translate} />
                  <DrawTimer lang={lang} theme={theme} />
                  <button onClick={() => setShowDropRates(true)} className="bg-slate-800 hover:bg-slate-700 text-slate-300 hover:text-white p-2.5 rounded-full flex items-center justify-center transition-all border border-white/10 hover:border-white/20 hover:shadow-lg hover:shadow-purple-500/20 active:scale-95" title={translate('dropRates')}><Icons.Percent size={20} /></button>
                  {compareList.length > 0 && (<button onClick={() => setShowCompare(true)} className="bg-blue-600 hover:bg-blue-500 text-white px-5 py-2.5 rounded-full flex items-center gap-2 text-sm font-semibold transition-all hover:shadow-[0_0_20px_rgba(37,99,235,0.5)] active:scale-95 animate-pulse"><Icons.Scale size={18} /> {translate('compare')} <span className="bg-white/20 px-1.5 py-0.5 rounded text-xs">{compareList.length}</span></button>)}
                </div>
              </div>
              <div className="mt-6 flex flex-col gap-4 bg-slate-800/40 p-2 rounded-2xl border border-white/5 backdrop-blur-sm">
                <div className="flex flex-col xl:flex-row gap-4">
                  <div className="relative flex-grow group">
                    <Icons.Search className={`absolute left-4 top-3.5 text-slate-500 transition-colors`} style={{color: document.activeElement === document.querySelector('input') ? THEME_COLORS[theme].hex : undefined}} size={20} />
                    <input type="text" placeholder={translate('searchPlaceholder')} className={`w-full bg-slate-900/80 border border-white/5 rounded-xl py-3 pl-12 pr-4 text-sm focus:ring-2 outline-none text-slate-200 placeholder-slate-600 transition-all shadow-inner`} style={{'--tw-ring-color': THEME_COLORS[theme].hex}} value={search} onChange={(e) => setSearch(e.target.value)} />
                  </div>
                  
                  <button onClick={() => setShowAdvanced(!showAdvanced)} className={`px-4 py-3 rounded-lg border text-sm font-bold flex items-center gap-2 transition-all ${showAdvanced ? `bg-slate-700 text-white` : 'bg-[#0f141a] border-white/10 text-slate-400 hover:border-white/20'}`} style={{borderColor: showAdvanced ? THEME_COLORS[theme].hex : ''}}>
                      <Icons.Sliders size={18} /> {translate('advancedFilters')}
                  </button>
                  
                  <div className="relative">
                    <FilterDropdown value={sortBy} onChange={(e) => setSortBy(e.target.value)} options={[
                        {value: 'none', label: translate('sortBy')},
                        {value: 'name_asc', label: translate('sortNameAsc')},
                        {value: 'name_desc', label: translate('sortNameDesc')},
                        {value: 'nation', label: translate('sortNation')},
                        {value: 'tier_asc', label: translate('sortTierAsc')},
                        {value: 'tier_desc', label: translate('sortTierDesc')}
                    ]} icon={Icons.List} placeholder={translate('sortBy')} theme={theme} />
                  </div>
                </div>

                <div className="flex flex-col sm:flex-row gap-2 xl:w-auto w-full items-center flex-wrap">
                  <div className="w-full sm:w-auto flex-grow sm:flex-grow-0">
                    <FilterDropdown value={filterNation} onChange={(e) => setFilterNation(e.target.value)} options={uniqueNations.map(n => ({ value: n, label: n === 'All' ? translate('allNations') : tData(n) }))} icon={Icons.Globe} placeholder={translate('allNations')} theme={theme} />
                  </div>
                   <div className="w-full sm:w-auto flex-grow sm:flex-grow-0">
                    <FilterDropdown value={filterAge} onChange={(e) => setFilterAge(e.target.value)} options={uniqueAges.map(a => ({ value: a, label: a === 'All' ? translate('allAges') : tData(a) }))} icon={Icons.Info} placeholder={translate('allAges')} theme={theme} />
                  </div>
                   <div className="w-full sm:w-auto flex-grow sm:flex-grow-0">
                    <FilterDropdown value={filterRarity} onChange={(e) => setFilterRarity(e.target.value)} options={uniqueRarities.map(r => ({ value: r, label: r === 'All' ? translate('allTiers') : r }))} icon={Icons.Target} placeholder={translate('allTiers')} theme={theme} />
                  </div>
                  <div className="relative w-full sm:w-auto flex-grow sm:flex-grow-0">
                    <FilterDropdown value={ownershipFilter} onChange={(e) => setOwnershipFilter(e.target.value)} options={[{ value: 'all', label: translate('statusAll') }, { value: 'owned', label: translate('statusOwned') }, { value: 'missing', label: translate('statusMissing') }, { value: 'duplicates', label: translate('statusDuplicates') }]} icon={ownershipFilter === 'owned' ? Icons.Check : ownershipFilter === 'missing' ? Icons.X : ownershipFilter === 'duplicates' ? Icons.Filter : Icons.Filter} placeholder={translate('statusAll')} theme={theme} />
                  </div>
                  <button onClick={() => setViewMode(viewMode === 'grid' ? 'list' : 'grid')} className={`w-12 h-12 rounded-none clip-corner-tr bg-[#0f141a] border border-white/10 transition-all flex items-center justify-center shadow-lg group ${viewMode === 'list' ? 'bg-opacity-10' : 'text-slate-400 hover:text-white hover:border-white/20'}`} style={{color: viewMode === 'list' ? THEME_COLORS[theme].hex : undefined, borderColor: viewMode === 'list' ? THEME_COLORS[theme].hex : undefined, backgroundColor: viewMode === 'list' ? `${THEME_COLORS[theme].hex}1A` : undefined}} title={viewMode === 'grid' ? translate('compactView') : translate('cardView')}>
                    {viewMode === 'grid' ? <Icons.List size={20} /> : <Icons.Grid size={18} />}
                  </button>
                  <button onClick={resetFilters} className="w-12 h-12 rounded-none clip-corner-tr bg-[#0f141a] text-red-400/70 hover:text-red-400 hover:bg-red-900/20 border border-white/10 hover:border-red-500/30 transition-all flex items-center justify-center shadow-lg group relative" title={translate('reset')}><Icons.Trash2 size={18} /><span className="absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity"></span></button>
                </div>
                
                {showAdvanced && (
                    <div className="grid grid-cols-2 xs:grid-cols-3 md:grid-cols-5 gap-3 pt-2 border-t border-white/5 animate-in slide-in-from-bottom duration-200">
                        {[
                            { key: 'stabilizer', label: 'stabilizer' },
                            { key: 'thermal', label: 'thermal' },
                            { key: 'nightVision', label: 'nightVision' },
                            { key: 'era', label: 'era' },
                            { key: 'aps', label: 'aps' },
                            { key: 'autoloader', label: 'autoloader' },
                            { key: 'autocannon', label: 'autocannon' },
                            { key: 'rangefinder', label: 'rangefinder' },
                            { key: 'protectedAmmo', label: 'protectedAmmo' },
                            { key: 'missile', label: 'atgm_p' },
                            { key: 'missile_s', label: 'atgm_s' }
                        ].map(f => (
                            <button 
                                key={f.key}
                                onClick={() => toggleAdvFilter(f.key)}
                                className={`px-3 py-2 rounded text-xs font-bold flex items-center gap-2 border transition-all ${advancedFilters[f.key] ? '' : 'bg-slate-800/50 border-transparent text-slate-400 hover:bg-slate-800'}`}
                                style={advancedFilters[f.key] ? {backgroundColor: `${THEME_COLORS[theme].hex}33`, borderColor: THEME_COLORS[theme].hex, color: THEME_COLORS[theme].hex} : {}}
                            >
                                <div className={`w-3 h-3 rounded-sm border`} style={{backgroundColor: advancedFilters[f.key] ? THEME_COLORS[theme].hex : 'transparent', borderColor: advancedFilters[f.key] ? THEME_COLORS[theme].hex : '#64748b'}}></div>
                                {translate(f.label)}
                            </button>
                        ))}
                    </div>
                )}
              </div>
            </div>
          </header>

          <main ref={scrollContainerRef} onScroll={handleScroll} className="flex-grow overflow-y-auto custom-scrollbar w-full scroll-smooth">
            <div className="max-w-[1600px] mx-auto px-4 py-8">
              {filteredTanks.length === 0 ? (
                <div className="text-center py-32 text-slate-500 animate-in fade-in zoom-in duration-500"><div className="bg-slate-800/50 p-6 rounded-full inline-block mb-4 shadow-xl"><Icons.Filter size={48} className="opacity-50" /></div><p className="text-xl font-medium text-slate-400">{translate('noResults')}</p>{search && <p className="text-sm mt-2 text-slate-600">{translate('checkSpelling')}</p>}</div>
              ) : (
                viewMode === 'grid' ? (
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6 pb-20">
                  {filteredTanks.slice(0, visibleCount).map((tank) => {
                    const instances = collection[tank.id] || [];
                    const isCollected = instances.length > 0;
                    const isComparing = compareList.find(t => t.Name === tank.Name);
                    
                    // Determine VFX class based on rarity
                    let fxClass = '';
                    if (tank.Rarity.includes('Tier V')) fxClass = 'fx-holo-gold';
                    if (tank.Rarity.includes('Prototype')) fxClass = 'fx-holo-proto';
                    if (tank.Rarity.includes('Event')) fxClass = 'fx-holo-event';

                    return (
                      <div key={tank.id} className={`group relative bg-[#0f141a]/90 backdrop-blur-sm tech-border clip-corner-tr transition-all duration-300 hover:-translate-y-1 ${fxClass} ${isCollected ? '' : ''} ${isComparing ? 'ring-1 ring-blue-500 shadow-blue-500/20' : ''}`} style={{boxShadow: isCollected ? `0 0 20px ${THEME_COLORS[theme].hex}1A` : undefined}}>
                        <div className={`absolute left-0 top-0 bottom-0 w-1 z-20 ${isCollected ? '' : 'bg-slate-800'}`} style={{background: isCollected ? `linear-gradient(to bottom, ${THEME_COLORS[theme].hex}, ${THEME_COLORS[theme].hex}AA)` : undefined, boxShadow: isCollected ? `0 0 10px ${THEME_COLORS[theme].hex}` : undefined}}></div>
                        <div className="p-5 pb-0 relative z-10">
                          <div className="flex justify-between items-start gap-4">
                            <div className="flex-1 min-w-0">
                              <div className="flex items-center gap-2 mb-1"><span className="text-[10px] tracking-widest uppercase text-slate-400 font-bold bg-slate-900/50 px-2 py-0.5 rounded border border-white/5">{tData(tank.Nation)}</span></div>
                              <h3 className="font-black text-xl leading-snug text-slate-100 group-hover:text-white transition-colors line-clamp-2 drop-shadow-sm" title={tank.Name}>{tank.Name}</h3>
                              <div className="flex flex-wrap gap-2 mt-3 text-xs"><span className="flex items-center px-2 py-1 rounded bg-slate-700/50 text-slate-300 border border-white/5">{tData(tank.Age)}</span><span className={`flex items-center px-2 py-1 rounded font-bold border ${tank.Rarity.includes('Tier I') && !tank.Rarity.includes('II') && !tank.Rarity.includes('V') ? 'bg-slate-700/50 text-slate-400 border-white/5' : 'bg-gradient-to-r from-yellow-600/20 to-orange-600/20 text-orange-300 border-orange-500/20'}`}>{tank.Rarity}</span></div>
                            </div>
                            <div className="flex flex-col gap-2">
                              <button onClick={() => addTankInstance(tank.id)} className={`w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300 shadow-lg active:scale-95 ${isCollected ? 'text-white hover:brightness-110' : 'bg-slate-700 text-slate-400 hover:text-white'}`} style={{background: isCollected ? `linear-gradient(to bottom right, ${THEME_COLORS[theme].hex}, ${THEME_COLORS[theme].hex}CC)` : undefined, boxShadow: isCollected ? `0 0 10px ${THEME_COLORS[theme].hex}66` : undefined}} title={translate('addAnother')}><Icons.Plus size={20} /></button>
                              <button onClick={() => setViewTank(tank)} className="w-10 h-10 rounded-full flex items-center justify-center bg-slate-700/50 text-slate-400 hover:text-white hover:bg-blue-600 transition-all hover:shadow-lg hover:shadow-blue-900/30" title={translate('details')}><Icons.Eye size={18} /></button>
                              {isCollected && (<div className="w-10 h-10 rounded-full flex items-center justify-center bg-opacity-20 border border-opacity-30 shadow-inner" style={{backgroundColor: `${THEME_COLORS[theme].hex}20`, borderColor: `${THEME_COLORS[theme].hex}40`}}><span className="font-bold text-sm" style={{color: THEME_COLORS[theme].hex}}>x{instances.length}</span></div>)}
                            </div>
                          </div>
                        </div>
                        {isCollected && (
                          <div className="px-5 mt-4 max-h-28 overflow-y-auto custom-scrollbar space-y-2">
                            {instances.map((condition, idx) => (
                              <div key={idx} className="flex gap-2 items-center animate-in fade-in slide-in-from-left-2 duration-300">
                                <div className="relative flex-grow">
                                  <select value={condition} onChange={(e) => updateInstanceCondition(tank.id, idx, e.target.value)} className={`w-full text-[10px] font-bold uppercase tracking-wider py-1.5 pl-2 pr-6 rounded border cursor-pointer outline-none transition-all appearance-none ${CONDITIONS[condition] ? CONDITIONS[condition].color : 'bg-slate-700'}`}>{Object.values(CONDITIONS).map(c => (<option key={c.id} value={c.id} className="bg-slate-800 text-slate-200">{translate(c.id)}</option>))}</select>
                                  <div className="absolute right-2 top-1.5 pointer-events-none opacity-50 mixed-blend-overlay">▼</div>
                                </div>
                                <button onClick={() => removeTankInstance(tank.id, idx)} className="p-1.5 text-slate-500 hover:text-red-400 hover:bg-red-500/20 transition-colors rounded-md" title={translate('removeInstance')}><Icons.Trash2 size={14} /></button>
                              </div>
                            ))}
                          </div>
                        )}
                        <div className="p-5 pt-4 space-y-3 flex-grow">
                          <div className="h-px w-full bg-gradient-to-r from-transparent via-white/10 to-transparent mb-4"></div>
                          <StatBar label={translate('armor')} rawValue={tank.Armor} icon={Icons.Shield} lang={lang} statKey="Armor" />
                          <StatBar label={translate('firepower')} rawValue={tank.Firepower} icon={Icons.Crosshair} lang={lang} statKey="Firepower" />
                          <StatBar label={translate('mobility')} rawValue={tank.Mobility} icon={Icons.Zap} lang={lang} statKey="Mobility" />
                          <div className="grid grid-cols-2 gap-2 mt-4">
                            <div className="bg-slate-900/60 p-2 rounded border border-white/5 flex flex-col items-center justify-center text-center"><span className="text-[10px] text-slate-500 mb-1">{translate('accuracy')}</span><span className={`text-xs font-bold ${getStatColor(getStatValue(tank.Accuracy)).replace('bg-', 'text-')}`}>{lang === 'fr' ? translateData(tank.Accuracy, 'Accuracy', lang) : tank.Accuracy}</span></div>
                            <div className="bg-slate-900/60 p-2 rounded border border-white/5 flex flex-col items-center justify-center text-center"><span className="text-[10px] text-slate-500 mb-1">{translate('visibility')}</span><span className={`text-xs font-bold ${getStatColor(getStatValue(tank.Visibility)).replace('bg-', 'text-')}`}>{lang === 'fr' ? translateData(tank.Visibility, 'Visibility', lang) : tank.Visibility}</span></div>
                          </div>
                          <div className="flex flex-wrap gap-1.5 mt-3">
                            {[{ label: 'stabilizer', val: tank.Stabilizer }, { label: 'thermal', val: tank['Thermal Vision'] }, { label: 'era', val: tank.ERA }, { label: 'atgm_p', val: tank['ATGM (P)'] }].map((tech, i) => (<BooleanBadge key={i} label={translate(tech.label)} value={tech.val} lang={lang} />))}
                            {(tank.Autoloader === 'Yes' || tank.APS === 'Yes') && <div className="text-[10px] text-slate-500 ml-auto flex items-center gap-1">+ others</div>}
                          </div>
                        </div>
                        <div className="px-5 py-3 border-t border-white/5 bg-slate-900/40 flex justify-between items-center mt-auto group-hover:bg-slate-900/60 transition-colors">
                          <button onClick={() => toggleCompare(tank)} className={`text-xs font-bold px-3 py-1.5 rounded-full flex items-center gap-1.5 transition-all active:scale-95 ${isComparing ? 'bg-blue-600 text-white shadow-lg shadow-blue-500/30' : 'text-blue-400 bg-blue-500/10 hover:bg-blue-500/20'}`}>{isComparing ? <Icons.Check size={12} strokeWidth={3} /> : <Icons.Scale size={14} />}{isComparing ? translate('selected') : translate('compare')}</button>
                          <span className="text-[10px] uppercase tracking-wider text-slate-500 font-medium bg-slate-800 px-2 py-1 rounded border border-white/5">{tData(tank.Size, 'Size')}</span>
                        </div>
                      </div>
                    );
                  })}
                </div>
                ) : (
                  <div className="flex flex-col gap-2 pb-20">
                    {filteredTanks.slice(0, visibleCount).map((tank) => {
                      const instances = collection[tank.id] || [];
                      const isCollected = instances.length > 0;
                      return (
                        <div key={tank.id} className={`flex flex-col sm:flex-row items-start sm:items-center justify-between p-3 bg-[#0f141a]/90 border border-white/5 rounded-lg hover:border-opacity-30 transition-all ${isCollected ? 'border-l-4' : ''}`} style={{borderColor: isCollected ? THEME_COLORS[theme].hex : undefined}}>
                            <div className="flex items-center gap-4 w-full sm:w-auto">
                                <span className={`text-xs font-bold px-2 py-1 rounded bg-slate-800 text-slate-400 min-w-[80px] text-center`}>{tData(tank.Nation)}</span>
                                <div>
                                    <h4 className={`font-black text-lg`} style={{color: isCollected ? THEME_COLORS[theme].hex : '#cbd5e1'}}>{tank.Name}</h4>
                                    <div className="flex gap-2 text-[10px] text-slate-500 uppercase tracking-wider">
                                        <span>{tData(tank.Age)}</span> • <span>{tank.Rarity}</span>
                                    </div>
                                </div>
                            </div>
                            <div className="flex items-center gap-3 mt-3 sm:mt-0 w-full sm:w-auto justify-end">
                                {isCollected ? (
                                    <div className="px-3 py-1 bg-opacity-20 border border-opacity-30 rounded text-xs font-bold" style={{backgroundColor: `${THEME_COLORS[theme].hex}33`, borderColor: `${THEME_COLORS[theme].hex}4D`, color: THEME_COLORS[theme].hex}}>
                                        {instances.length} {translate('instances')}
                                    </div>
                                ) : (
                                    <button onClick={() => addTankInstance(tank.id)} className="text-slate-500 hover:text-white"><Icons.Plus size={20} /></button>
                                )}
                                <button onClick={() => setViewTank(tank)} className="p-2 bg-slate-800 rounded hover:bg-slate-700 text-slate-400 hover:text-white transition-colors"><Icons.Eye size={16}/></button>
                            </div>
                        </div>
                      );
                    })}
                  </div>
                )
              )}
            </div>
          </main>
          
          {showCompare && (
            <div className="fixed inset-0 z-50 bg-slate-900/80 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-300" onClick={() => setShowCompare(false)}>
              <div className="bg-slate-800/90 backdrop-blur-xl w-full max-w-6xl max-h-[95vh] rounded-3xl border border-opacity-20 shadow-2xl overflow-hidden flex flex-col animate-in zoom-in duration-300 ring-1 ring-white/10" style={{borderColor: THEME_COLORS[theme].hex}} onClick={e => e.stopPropagation()}>
                <div className="p-6 border-b border-white/5 flex justify-between items-center bg-slate-900/50">
                  <h2 className="text-xl sm:text-2xl font-black text-white flex items-center gap-3"><Icons.Scale className="text-blue-400" /> {translate('compare')}</h2>
                  <div className="flex gap-2 sm:gap-4">
                    <button onClick={() => setCompareList([])} className="text-xs sm:text-sm text-red-400 hover:text-red-300 transition-colors uppercase font-bold tracking-wider">{translate('reset')}</button>
                    <button onClick={() => setShowCompare(false)} className="text-slate-400 hover:text-white transition-colors bg-slate-800 p-2 rounded-full"><Icons.X className="w-5 h-5 sm:w-6 sm:h-6" /></button>
                  </div>
                </div>
                <div className="overflow-auto p-4 sm:p-8 custom-scrollbar">
                  {compareList.length === 0 ? (<div className="text-center py-20 text-slate-500"><p>{translate('selectTanks')}</p></div>) : (
                    <div className="min-w-[800px]"> 
                        <div className="mb-8 p-4 bg-[#0f141a] border border-white/5 rounded-2xl flex justify-center tech-border">
                          <div className="flex gap-8 items-center">
                            <div className="text-xs text-slate-500 uppercase tracking-widest max-w-[150px]">Comparing up to 4 units on the tactical grid.</div>
                            <div className="relative" style={{ width: 300, height: 300 }}>
                              {compareList.map((tank, idx) => {
                                const colors = ['#10b981', '#3b82f6', '#f59e0b', '#ef4444'];
                                return (
                                  <div key={tank.id} className="absolute inset-0 flex justify-center items-center pointer-events-none">
                                    <RadarChart size={280} color={colors[idx]} data={[{ label: 'ARM', value: getStatValue(tank.Armor) }, { label: 'FPOW', value: getStatValue(tank.Firepower) }, { label: 'ACC', value: getStatValue(tank.Accuracy) }, { label: 'MOB', value: getStatValue(tank.Mobility) }, { label: 'VIS', value: getStatValue(tank.Visibility) }]} />
                                  </div>
                                )
                              })}
                            </div>
                            <div className="flex flex-col gap-2">
                              {compareList.map((tank, idx) => (
                                <div key={tank.id} className="flex items-center gap-2">
                                  <div className="w-3 h-3 rounded-full" style={{ background: ['#10b981', '#3b82f6', '#f59e0b', '#ef4444'][idx] }}></div>
                                  <span className="text-xs font-bold text-slate-300">{tank.Name}</span>
                                </div>
                              ))}
                            </div>
                          </div>
                        </div>

                      <ComparisonTable 
                        compareList={compareList} 
                        getStatValue={getStatValue} 
                        getStatColor={getStatColor} 
                        translate={translate} 
                        tData={tData} 
                        lang={lang}
                        theme={theme}
                      />
                    </div>
                  )}
                </div>
              </div>
            </div>
          )}

          {viewTank && (
            <div className="fixed inset-0 z-50 bg-slate-900/80 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-300" onClick={() => setViewTank(null)}>
              <div className="bg-slate-800/90 backdrop-blur-xl w-full max-w-4xl max-h-[90vh] rounded-3xl border border-white/10 shadow-2xl overflow-hidden flex flex-col animate-in zoom-in duration-300 ring-1 ring-white/10" onClick={e => e.stopPropagation()}>
                <div className="p-6 border-b border-white/5 flex justify-between items-start bg-slate-900/50">
                  <div>
                    <div className="flex items-center gap-3 mb-2"><span className="text-xs font-bold tracking-widest uppercase text-slate-400 bg-slate-900 px-2 py-1 rounded border border-white/5">{tData(viewTank.Nation)}</span><span className={`text-xs px-2 py-1 rounded font-bold border ${viewTank.Rarity.includes('Tier I') && !viewTank.Rarity.includes('II') && !viewTank.Rarity.includes('V') ? 'bg-slate-700 text-slate-300 border-white/5' : 'bg-yellow-500/10 text-yellow-500 border-yellow-500/20'}`}>{viewTank.Rarity}</span></div>
                    <h2 className="text-3xl font-black text-white leading-tight drop-shadow-md">{viewTank.Name}</h2>
                  </div>
                  <button onClick={() => setViewTank(null)} className="text-slate-400 hover:text-white hover:bg-red-500/20 hover:rotate-90 transition-all bg-slate-800 p-2 rounded-full"><Icons.X size={24} /></button>
                </div>
                <div className="overflow-y-auto p-8 custom-scrollbar">
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div className="space-y-6">
                      <div>
                        <h4 className="flex items-center gap-2 font-bold uppercase text-xs tracking-wider mb-4 border-b border-white/5 pb-2" style={{color: THEME_COLORS[theme].hex}}><Icons.Database size={14} /> Statistiques Principales</h4>
                        <div className="space-y-4">
                          <StatBar label={translate('armor')} rawValue={viewTank.Armor} icon={Icons.Shield} lang={lang} statKey="Armor" />
                          <StatBar label={translate('firepower')} rawValue={viewTank.Firepower} icon={Icons.Crosshair} lang={lang} statKey="Firepower" />
                          <StatBar label={translate('mobility')} rawValue={viewTank.Mobility} icon={Icons.Zap} lang={lang} statKey="Mobility" />
                          <StatBar label={translate('accuracy')} rawValue={viewTank.Accuracy} icon={Icons.Target} lang={lang} statKey="Accuracy" />
                          <StatBar label={translate('visibility')} rawValue={viewTank.Visibility} icon={Icons.Eye} lang={lang} statKey="Visibility" />
                        </div>
                        <div className="flex justify-center mt-6 mb-2"><RadarChart size={240} color={THEME_COLORS[theme].hex} data={[{ label: 'ARM', value: getStatValue(viewTank.Armor) }, { label: 'FPOW', value: getStatValue(viewTank.Firepower) }, { label: 'ACC', value: getStatValue(viewTank.Accuracy) }, { label: 'MOB', value: getStatValue(viewTank.Mobility) }, { label: 'VIS', value: getStatValue(viewTank.Visibility) }]} /></div>
                      </div>
                      <div className="bg-slate-900/50 p-4 rounded-2xl border border-white/5"><div className="flex justify-between items-center text-sm text-slate-300"><span>{translate('size')}</span><span className="font-bold text-white bg-slate-700 px-3 py-1 rounded-full">{tData(viewTank.Size, 'Size')}</span></div></div>
                      {collection[viewTank.id] && collection[viewTank.id].length > 0 && (<div className="bg-opacity-10 border border-opacity-20 p-4 rounded-2xl" style={{backgroundColor: `${THEME_COLORS[theme].hex}1A`, borderColor: `${THEME_COLORS[theme].hex}33`}}><h5 className="text-xs font-bold uppercase mb-3 flex items-center gap-2" style={{color: THEME_COLORS[theme].hex}}><Icons.Check size={14} /> {translate('collected')} (x{collection[viewTank.id].length})</h5><div className="flex flex-wrap gap-2">{collection[viewTank.id].map((cond, idx) => (<span key={idx} className={`px-2 py-1 rounded text-xs border font-medium ${CONDITIONS[cond] ? CONDITIONS[cond].color : ''}`}>{translate(cond)}</span>))}</div></div>)}
                    </div>
                    <div>
                      <h4 className="flex items-center gap-2 text-blue-400 font-bold uppercase text-xs tracking-wider mb-4 border-b border-white/5 pb-2"><Icons.Zap size={14} /> Équipements & Technologies</h4>
                      <div className="grid grid-cols-1 gap-2">
                        {[{ key: 'Stabilizer', label: 'stabilizer' }, { key: 'Thermal Vision', label: 'thermal' }, { key: 'Night Vision', label: 'nightVision' }, { key: 'ERA', label: 'era' }, { key: 'APS', label: 'aps' }, { key: 'Autoloader', label: 'autoloader' }, { key: 'Autocannon', label: 'autocannon' }, { key: 'Rangefinder', label: 'rangefinder' }, { key: 'Protected Ammo', label: 'protectedAmmo' }, { key: 'ATGM (P)', label: 'atgm_p' }, { key: 'ATGM (S)', label: 'atgm_s' }].map(item => (
                          <div key={item.key} className={`flex justify-between items-center p-3 rounded-xl border transition-colors ${viewTank[item.key] === 'Yes' ? 'bg-slate-700/40 border-opacity-20' : 'bg-slate-900/30 border-white/5 opacity-60'}`} style={{borderColor: viewTank[item.key] === 'Yes' ? `${THEME_COLORS[theme].hex}33` : undefined}}>
                            <span className="text-sm text-slate-300 font-medium">{translate(item.label)}</span>
                            {viewTank[item.key] === 'Yes' ? (<span className="bg-opacity-20 p-1 rounded-full" style={{backgroundColor: `${THEME_COLORS[theme].hex}33`, color: THEME_COLORS[theme].hex}}><Icons.Check size={14} strokeWidth={3} /></span>) : (<span className="text-slate-600"><Icons.X size={14} /></span>)}
                          </div>
                        ))}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          )}

          {showDropRates && (
            <div className="fixed inset-0 z-50 bg-slate-900/80 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-300" onClick={() => setShowDropRates(false)}>
              <div className="bg-slate-800/90 backdrop-blur-xl w-full max-w-lg rounded-3xl border border-white/10 shadow-2xl overflow-hidden flex flex-col animate-in zoom-in duration-300 ring-1 ring-white/10" onClick={e => e.stopPropagation()}>
                <div className="p-5 border-b border-white/5 flex justify-between items-center bg-slate-900/50">
                  <h2 className="text-xl font-bold text-white flex items-center gap-2"><Icons.Percent className="text-purple-400" /> {translate('dropRates')}</h2>
                  <button onClick={() => setShowDropRates(false)} className="text-slate-400 hover:text-white transition-colors"><Icons.X size={24} /></button>
                </div>
                <div className="p-6">
                  <p className="text-sm text-slate-400 mb-4 italic">{translate('dropNote')}</p>
                  <div className="space-y-3">{FIXED_DROP_RATES.map((rate, idx) => (<div key={idx} className="flex justify-between items-center p-3 bg-slate-700/30 rounded-xl border border-white/5"><span className={`font-bold ${rate.color}`}>{rate.tier}</span><span className="font-mono text-slate-200">{rate.rate}</span></div>))}</div>
                </div>
              </div>
            </div>
          )}
          
          <SupplyDropModal isOpen={showSupply} onClose={() => setShowSupply(false)} onOpenDrop={initiateSupplyDrop} isOpening={isOpeningDrop} dropResult={dropResult} lang={lang} />
          <ProfileModal isOpen={showProfile} onClose={() => setShowProfile(false)} stats={{ total: Object.values(collection).reduce((acc, curr) => acc + curr.length, 0), unique: Object.keys(collection).length }} lang={lang} tanks={tanks} collection={collection} setCollection={setCollection} translate={translate} addToast={addToast} />
          <footer className="py-2 text-center text-[10px] text-slate-600 border-t border-slate-800 bg-slate-900 border-b-4 border-b-slate-900">
            <p className="flex justify-center items-center gap-2">
              <span className="font-bold uppercase tracking-widest" style={{color: THEME_COLORS[theme].hex}}>{translate('credits')}</span>
              <span className="opacity-30">|</span>
              <span className="opacity-50">v2.15 Reforged</span>
            </p>
            
            {showBackToTop && (
                <button 
                  onClick={() => scrollContainerRef.current.scrollTo({ top: 0, behavior: 'smooth' })} 
                  className="fixed bottom-8 right-8 text-white w-12 h-12 flex items-center justify-center rounded-full shadow-lg border border-white/30 z-40 transition-all duration-300 animate-in zoom-in hover:-translate-y-1 hover:shadow-lg"
                  style={{backgroundColor: THEME_COLORS[theme].hex}}
                  title="Haut de page"
                >
                  <Icons.ArrowUp size={24} />
                </button>
            )}
          </footer>
        </div>
      );
    }
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<TankApp />);
  </script>
</body>
</html>
